<!DOCTYPE html><html lang="en" dir="ltr" data-has-toc data-has-sidebar class="astro-fpze62lo"> <head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Rust 语言入门101 | Cookbook for Rustaceans in Finance / Rust 量化金融开发指南</title><link rel="canonical"/><link rel="shortcut icon" href="/favicon.svg" type="image/svg+xml"/><meta name="generator" content="Astro v4.3.3"/><meta name="generator" content="Starlight v0.17.3"/><meta property="og:title" content="Rust 语言入门101"/><meta property="og:type" content="article"/><meta property="og:url"/><meta property="og:locale" content="en"/><meta property="og:description" content="A guide in my new Starlight docs site."/><meta property="og:site_name" content="Cookbook for Rustaceans in Finance / Rust 量化金融开发指南"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Rust 语言入门101"/><meta name="twitter:description" content="A guide in my new Starlight docs site."/><meta name="description" content="A guide in my new Starlight docs site."/><script>
	window.StarlightThemeProvider = (() => {
		const storedTheme =
			typeof localStorage !== 'undefined' && localStorage.getItem('starlight-theme');
		const theme =
			storedTheme ||
			(window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark');
		document.documentElement.dataset.theme = theme === 'light' ? 'light' : 'dark';
		return {
			updatePickers(theme = storedTheme || 'auto') {
				document.querySelectorAll('starlight-theme-select').forEach((picker) => {
					const select = picker.querySelector('select');
					if (select) select.value = theme;
					/** @type {HTMLTemplateElement | null} */
					const tmpl = document.querySelector(`#theme-icons`);
					const newIcon = tmpl && tmpl.content.querySelector('.' + theme);
					if (newIcon) {
						const oldIcon = picker.querySelector('svg.label-icon');
						if (oldIcon) {
							oldIcon.replaceChildren(...newIcon.cloneNode(true).childNodes);
						}
					}
				});
			},
		};
	})();
</script><template id="theme-icons"><svg aria-hidden="true" class="light astro-xrndq6a6" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M5 12a1 1 0 0 0-1-1H3a1 1 0 0 0 0 2h1a1 1 0 0 0 1-1Zm.64 5-.71.71a1 1 0 0 0 0 1.41 1 1 0 0 0 1.41 0l.71-.71A1 1 0 0 0 5.64 17ZM12 5a1 1 0 0 0 1-1V3a1 1 0 0 0-2 0v1a1 1 0 0 0 1 1Zm5.66 2.34a1 1 0 0 0 .7-.29l.71-.71a1 1 0 1 0-1.41-1.41l-.66.71a1 1 0 0 0 0 1.41 1 1 0 0 0 .66.29Zm-12-.29a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.71-.71a1.004 1.004 0 1 0-1.43 1.41l.73.71ZM21 11h-1a1 1 0 0 0 0 2h1a1 1 0 0 0 0-2Zm-2.64 6A1 1 0 0 0 17 18.36l.71.71a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.76-.66ZM12 6.5a5.5 5.5 0 1 0 5.5 5.5A5.51 5.51 0 0 0 12 6.5Zm0 9a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7Zm0 3.5a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1a1 1 0 0 0-1-1Z"/></svg> <svg aria-hidden="true" class="dark astro-xrndq6a6" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.64 13a1 1 0 0 0-1.05-.14 8.049 8.049 0 0 1-3.37.73 8.15 8.15 0 0 1-8.14-8.1 8.59 8.59 0 0 1 .25-2A1 1 0 0 0 8 2.36a10.14 10.14 0 1 0 14 11.69 1 1 0 0 0-.36-1.05Zm-9.5 6.69A8.14 8.14 0 0 1 7.08 5.22v.27a10.15 10.15 0 0 0 10.14 10.14 9.784 9.784 0 0 0 2.1-.22 8.11 8.11 0 0 1-7.18 4.32v-.04Z"/></svg> <svg aria-hidden="true" class="auto astro-xrndq6a6" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg> </template><link rel="stylesheet" href="/_astro/index.4lckRRHb.css" /><script type="module" src="/_astro/hoisted.RLbdawI7.js"></script>
<script type="module" src="/_astro/page.X_0NJa-z.js"></script></head> <body class="astro-fpze62lo"> <a href="#_top" class="astro-byjsuuaw">Skip to content</a>  <div class="page sl-flex astro-yxqmbg7i"> <header class="header astro-yxqmbg7i"><div class="header sl-flex astro-cyrhhlnw"> <div class="title-wrapper sl-flex astro-cyrhhlnw"> <a href="/" class="site-title sl-flex astro-ylanx5mn">  <span class="astro-ylanx5mn"> Cookbook for Rustaceans in Finance / Rust 量化金融开发指南 </span> </a>  </div> <div class="sl-flex astro-cyrhhlnw"> <site-search data-translations="{&#34;placeholder&#34;:&#34;Search&#34;}" class="astro-usz5hgcn"> <button data-open-modal disabled class="astro-usz5hgcn">  <svg aria-label="Search" class="astro-usz5hgcn astro-xrndq6a6" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.71 20.29 18 16.61A9 9 0 1 0 16.61 18l3.68 3.68a.999.999 0 0 0 1.42 0 1 1 0 0 0 0-1.39ZM11 18a7 7 0 1 1 0-14 7 7 0 0 1 0 14Z"/></svg>  <span class="sl-hidden md:sl-block astro-usz5hgcn" aria-hidden="true">Search</span> <svg aria-label="(Press / to Search)" class="sl-hidden md:sl-block astro-usz5hgcn astro-xrndq6a6" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 2H7a5 5 0 0 0-5 5v10a5 5 0 0 0 5 5h10a5 5 0 0 0 5-5V7a5 5 0 0 0-5-5Zm3 15a3 3 0 0 1-3 3H7a3 3 0 0 1-3-3V7a3 3 0 0 1 3-3h10a3 3 0 0 1 3 3v10Z"/><path d="M15.293 6.707a1 1 0 1 1 1.414 1.414l-8.485 8.486a1 1 0 0 1-1.414-1.415l8.485-8.485Z"/></svg>  </button> <dialog style="padding:0" aria-label="Search" class="astro-usz5hgcn"> <div class="dialog-frame sl-flex astro-usz5hgcn">  <button data-close-modal class="sl-flex md:sl-hidden astro-usz5hgcn"> Cancel </button> <div class="search-container astro-usz5hgcn"> <div id="starlight__search" class="astro-usz5hgcn"></div> </div> </div> </dialog> </site-search>    </div> <div class="sl-hidden md:sl-flex right-group astro-cyrhhlnw"> <div class="sl-flex social-icons astro-cyrhhlnw"> <a href="https://github.com/withastro/starlight" rel="me" class="sl-flex astro-3daxh4jc"><span class="sr-only astro-3daxh4jc">GitHub</span><svg aria-hidden="true" class="astro-3daxh4jc astro-xrndq6a6" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg> </a> </div> <starlight-theme-select>  <label style="--sl-select-width: 6.25em" class="astro-kc6u4lxd"> <span class="sr-only astro-kc6u4lxd">Select theme</span> <svg aria-hidden="true" class="icon label-icon astro-kc6u4lxd astro-xrndq6a6" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg>  <select value="auto" class="astro-kc6u4lxd"> <option value="dark" class="astro-kc6u4lxd">Dark</option><option value="light" class="astro-kc6u4lxd">Light</option><option value="auto" selected="true" class="astro-kc6u4lxd">Auto</option> </select> <svg aria-hidden="true" class="icon caret astro-kc6u4lxd astro-xrndq6a6" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </label>  </starlight-theme-select>  <script>
	StarlightThemeProvider.updatePickers();
</script>   </div> </div> </header> <nav class="sidebar astro-yxqmbg7i" aria-label="Main"> <starlight-menu-button class="astro-eouth4v3"> <button aria-expanded="false" aria-label="Menu" aria-controls="starlight__sidebar" class="sl-flex md:sl-hidden astro-eouth4v3"> <svg aria-hidden="true" class="astro-eouth4v3 astro-xrndq6a6" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M3 8h18a1 1 0 1 0 0-2H3a1 1 0 0 0 0 2Zm18 8H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Zm0-5H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Z"/></svg>  </button> </starlight-menu-button>    <div id="starlight__sidebar" class="sidebar-pane astro-yxqmbg7i"> <div class="sidebar-content sl-flex astro-yxqmbg7i"> <ul class="top-level astro-4mcqxzkb"> <li class="astro-4mcqxzkb"> <details open class="astro-4mcqxzkb"> <summary class="astro-4mcqxzkb"> <div class="group-label astro-4mcqxzkb"> <span class="large astro-4mcqxzkb">PART I 基础部分 - 量化语境下的Rust编程基础</span>  </div> <svg aria-hidden="true" class="caret astro-4mcqxzkb astro-xrndq6a6" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-4mcqxzkb"> <li class="astro-4mcqxzkb"> <a href="/chapters/chapter_1" aria-current="page" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">1. Rust 语言入门101</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_2/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">2. 格式化输出</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_3/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">3. 原生类型</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_4/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">4. 自定义类型 Struct &amp; Enum</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_5/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">5. 标准库类型</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_6/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">6. 变量和作用域</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_7/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">7. 类型系统</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_8/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">8. 类型转换</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_9/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">9. 流程控制</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_10/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">10. 函数、方法和闭包</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_11/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">11. 模块</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_12/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">12. Cargo 的进阶使用</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_13/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">13. 属性(Attributes)</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_14/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">14. 泛型进阶(Advanced Generic Type Usage)</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_15/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">15. 作用域规则和生命周期</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_16/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">16. 错误处理进阶(Advanced Error handling)</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_17/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">17. 特性(trait)详解</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_18/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">18. 创建自定义宏</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_19/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">19. 时间处理</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_20/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">20. Redis、爬虫、交易日库</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_21/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">21. 线程和管道</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_22/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">22. 文件处理</span>  </a> </li> </ul>  </details> </li><li class="astro-4mcqxzkb"> <details open class="astro-4mcqxzkb"> <summary class="astro-4mcqxzkb"> <div class="group-label astro-4mcqxzkb"> <span class="large astro-4mcqxzkb">PART II 进阶部分 - 量化实战</span>  </div> <svg aria-hidden="true" class="caret astro-4mcqxzkb astro-xrndq6a6" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-4mcqxzkb"> <li class="astro-4mcqxzkb"> <a href="/chapters/chapter_23/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">23. Polars 入门</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_24/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">24. 时序数据库 Clickhouse</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_25/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">25. Unsafe【未完成】</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_26/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">26. 文档和测试【未完成】</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_27/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">27. 常见技术指标及其实现【本章代码未添加】</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_28/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">28. 统计模型【未完成】</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_29/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">29. 引擎系统【未完成】</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_30/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">30. 日志系统【未完成】</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_31/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">31. 投资组合管理【未完成】</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_32/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">32. 量化计量经济学【未完成】</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_33/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">33. 限价指令簿【未完成】</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_34/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">34. 最优配置和执行【未完成】</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_35/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">35. 信息学、监管、风控【未完成】</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_36/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">36. 机器学习【未完成】</span>  </a> </li> </ul>  </details> </li> </ul>  <div class="md:sl-hidden"> <div class="mobile-preferences sl-flex astro-vfur2aw5"> <div class="sl-flex social-icons astro-vfur2aw5"> <a href="https://github.com/withastro/starlight" rel="me" class="sl-flex astro-3daxh4jc"><span class="sr-only astro-3daxh4jc">GitHub</span><svg aria-hidden="true" class="astro-3daxh4jc astro-xrndq6a6" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg> </a> </div> <starlight-theme-select>  <label style="--sl-select-width: 6.25em" class="astro-kc6u4lxd"> <span class="sr-only astro-kc6u4lxd">Select theme</span> <svg aria-hidden="true" class="icon label-icon astro-kc6u4lxd astro-xrndq6a6" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg>  <select value="auto" class="astro-kc6u4lxd"> <option value="dark" class="astro-kc6u4lxd">Dark</option><option value="light" class="astro-kc6u4lxd">Light</option><option value="auto" selected="true" class="astro-kc6u4lxd">Auto</option> </select> <svg aria-hidden="true" class="icon caret astro-kc6u4lxd astro-xrndq6a6" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </label>  </starlight-theme-select>  <script>
	StarlightThemeProvider.updatePickers();
</script>   </div>  </div> </div> </div> </nav> <div class="main-frame astro-yxqmbg7i">  <div class="lg:sl-flex astro-3vvvt7cz"> <aside class="right-sidebar-container astro-3vvvt7cz"> <div class="right-sidebar astro-3vvvt7cz"> <div class="lg:sl-hidden astro-f63w33c6"><mobile-starlight-toc data-min-h="2" data-max-h="3" class="astro-q2mrqdva"><nav aria-labelledby="starlight__on-this-page--mobile" class="astro-q2mrqdva"><details id="starlight__mobile-toc" class="astro-q2mrqdva"><summary id="starlight__on-this-page--mobile" class="sl-flex astro-q2mrqdva"><div class="toggle sl-flex astro-q2mrqdva">On this page<svg aria-hidden="true" class="caret astro-q2mrqdva astro-xrndq6a6" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </div><span class="display-current astro-q2mrqdva"></span></summary><div class="dropdown astro-q2mrqdva"><ul class="isMobile astro-acifyk5h" style="--depth: 0;"> <li class="astro-acifyk5h" style="--depth: 0;"> <a href="#_top" class="astro-acifyk5h" style="--depth: 0;"> <span class="astro-acifyk5h" style="--depth: 0;">Overview</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 0;"> <a href="#11-在类-unix-操作系统linuxmacos上安装-rustup" class="astro-acifyk5h" style="--depth: 0;"> <span class="astro-acifyk5h" style="--depth: 0;">1.1 在类 Unix 操作系统(Linux,MacOS)上安装 rustup</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 0;"> <a href="#12-安装-c-语言编译器--可选" class="astro-acifyk5h" style="--depth: 0;"> <span class="astro-acifyk5h" style="--depth: 0;">1.2 安装 C 语言编译器 [ 可选 ]</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 0;"> <a href="#13-维护-rust-工具链" class="astro-acifyk5h" style="--depth: 0;"> <span class="astro-acifyk5h" style="--depth: 0;">1.3 维护 Rust 工具链</span> </a> <ul class="isMobile astro-acifyk5h" style="--depth: 1;"> <li class="astro-acifyk5h" style="--depth: 1;"> <a href="#更新rust" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">更新Rust</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#卸载rust" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">卸载Rust</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#检查rust安装是否成功--检查rustc版本" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">检查Rust安装是否成功 &amp; 检查rustc版本</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#检查cargo版本" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">检查cargo版本</span> </a>  </li> </ul>  </li><li class="astro-acifyk5h" style="--depth: 0;"> <a href="#14-nightly-版本" class="astro-acifyk5h" style="--depth: 0;"> <span class="astro-acifyk5h" style="--depth: 0;">1.4 Nightly 版本</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 0;"> <a href="#15-cargo的使用" class="astro-acifyk5h" style="--depth: 0;"> <span class="astro-acifyk5h" style="--depth: 0;">1.5 cargo的使用</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 0;"> <a href="#16-cargo-和-rustup的区别" class="astro-acifyk5h" style="--depth: 0;"> <span class="astro-acifyk5h" style="--depth: 0;">1.6 cargo 和 rustup的区别</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 0;"> <a href="#17-用cargo创立并搭建第一个项目" class="astro-acifyk5h" style="--depth: 0;"> <span class="astro-acifyk5h" style="--depth: 0;">1.7 用cargo创立并搭建第一个项目</span> </a> <ul class="isMobile astro-acifyk5h" style="--depth: 1;"> <li class="astro-acifyk5h" style="--depth: 1;"> <a href="#1-用-cargo-new-project-name-新建项目" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">1. 用 cargo new &lt;project-name&gt; 新建项目</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#2-编辑-cargotoml" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">2. 编辑 cargo.toml</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#3-构建并运行-cargo-项目" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">3. 构建并运行 Cargo 项目</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#4-发布构建" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">4. 发布构建</span> </a>  </li> </ul>  </li><li class="astro-acifyk5h" style="--depth: 0;"> <a href="#18-需要了解的几个rust概念" class="astro-acifyk5h" style="--depth: 0;"> <span class="astro-acifyk5h" style="--depth: 0;">1.8 需要了解的几个Rust概念</span> </a> <ul class="isMobile astro-acifyk5h" style="--depth: 1;"> <li class="astro-acifyk5h" style="--depth: 1;"> <a href="#作用域-scope" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">作用域 (Scope)</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#所有权-ownership" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">所有权 (Ownership)</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#可变性-mutability" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">可变性 (mutability)</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#借用borrowing" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">借用(Borrowing)</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#生命周期lifetime" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">生命周期(Lifetime)</span> </a>  </li> </ul>  </li> </ul> </div></details></nav></mobile-starlight-toc></div><div class="right-sidebar-panel sl-hidden lg:sl-block astro-f63w33c6"><div class="sl-container astro-f63w33c6"><starlight-toc data-min-h="2" data-max-h="3"><nav aria-labelledby="starlight__on-this-page"><h2 id="starlight__on-this-page">On this page</h2><ul class="astro-acifyk5h" style="--depth: 0;"> <li class="astro-acifyk5h" style="--depth: 0;"> <a href="#_top" class="astro-acifyk5h" style="--depth: 0;"> <span class="astro-acifyk5h" style="--depth: 0;">Overview</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 0;"> <a href="#11-在类-unix-操作系统linuxmacos上安装-rustup" class="astro-acifyk5h" style="--depth: 0;"> <span class="astro-acifyk5h" style="--depth: 0;">1.1 在类 Unix 操作系统(Linux,MacOS)上安装 rustup</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 0;"> <a href="#12-安装-c-语言编译器--可选" class="astro-acifyk5h" style="--depth: 0;"> <span class="astro-acifyk5h" style="--depth: 0;">1.2 安装 C 语言编译器 [ 可选 ]</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 0;"> <a href="#13-维护-rust-工具链" class="astro-acifyk5h" style="--depth: 0;"> <span class="astro-acifyk5h" style="--depth: 0;">1.3 维护 Rust 工具链</span> </a> <ul class="astro-acifyk5h" style="--depth: 1;"> <li class="astro-acifyk5h" style="--depth: 1;"> <a href="#更新rust" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">更新Rust</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#卸载rust" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">卸载Rust</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#检查rust安装是否成功--检查rustc版本" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">检查Rust安装是否成功 &amp; 检查rustc版本</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#检查cargo版本" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">检查cargo版本</span> </a>  </li> </ul>  </li><li class="astro-acifyk5h" style="--depth: 0;"> <a href="#14-nightly-版本" class="astro-acifyk5h" style="--depth: 0;"> <span class="astro-acifyk5h" style="--depth: 0;">1.4 Nightly 版本</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 0;"> <a href="#15-cargo的使用" class="astro-acifyk5h" style="--depth: 0;"> <span class="astro-acifyk5h" style="--depth: 0;">1.5 cargo的使用</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 0;"> <a href="#16-cargo-和-rustup的区别" class="astro-acifyk5h" style="--depth: 0;"> <span class="astro-acifyk5h" style="--depth: 0;">1.6 cargo 和 rustup的区别</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 0;"> <a href="#17-用cargo创立并搭建第一个项目" class="astro-acifyk5h" style="--depth: 0;"> <span class="astro-acifyk5h" style="--depth: 0;">1.7 用cargo创立并搭建第一个项目</span> </a> <ul class="astro-acifyk5h" style="--depth: 1;"> <li class="astro-acifyk5h" style="--depth: 1;"> <a href="#1-用-cargo-new-project-name-新建项目" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">1. 用 cargo new &lt;project-name&gt; 新建项目</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#2-编辑-cargotoml" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">2. 编辑 cargo.toml</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#3-构建并运行-cargo-项目" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">3. 构建并运行 Cargo 项目</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#4-发布构建" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">4. 发布构建</span> </a>  </li> </ul>  </li><li class="astro-acifyk5h" style="--depth: 0;"> <a href="#18-需要了解的几个rust概念" class="astro-acifyk5h" style="--depth: 0;"> <span class="astro-acifyk5h" style="--depth: 0;">1.8 需要了解的几个Rust概念</span> </a> <ul class="astro-acifyk5h" style="--depth: 1;"> <li class="astro-acifyk5h" style="--depth: 1;"> <a href="#作用域-scope" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">作用域 (Scope)</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#所有权-ownership" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">所有权 (Ownership)</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#可变性-mutability" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">可变性 (mutability)</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#借用borrowing" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">借用(Borrowing)</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#生命周期lifetime" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">生命周期(Lifetime)</span> </a>  </li> </ul>  </li> </ul> </nav></starlight-toc></div></div> </div> </aside> <div class="main-pane astro-3vvvt7cz">  <main data-pagefind-body lang="en" dir="ltr" class="astro-fpze62lo">    <div class="content-panel astro-vo2eo5fg"> <div class="sl-container astro-vo2eo5fg"> <h1 id="_top" class="astro-daoses2n">Rust 语言入门101</h1>  </div> </div>  <div class="content-panel astro-vo2eo5fg"> <div class="sl-container astro-vo2eo5fg"> <div class="sl-markdown-content"> <p>开始之前我们不妨做一些简单的准备工作。</p>
<h2 id="11-在类-unix-操作系统linuxmacos上安装-rustup">1.1 在类 Unix 操作系统(Linux,MacOS)上安装 rustup</h2>
<p>打开终端并输入下面命令：</p>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.usa2f.css"><script type="module" src="/_astro/ec.sgewm.js"></script><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#82AAFF;--1:#3C63B3">curl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">--proto</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#9B504E">=https</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">--tlsv1.2</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">https://sh.rustup.rs</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-sSf</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">sh</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="curl --proto &#x27;=https&#x27; --tlsv1.2 https://sh.rustup.rs -sSf | sh"><div></div></button></div></figure></div>
<p>只要出现下面这行：</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#82AAFF;--1:#3C63B3">Rust</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">is</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">installed</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">now.</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">Great!</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="Rust is installed now. Great!"><div></div></button></div></figure></div>
<p>就完成 Rust 安装了。</p>
<blockquote>
<p><strong>[建议]</strong> 量化金融从业人员为什么应该尝试接触使用Linux？</p>
<ol>
<li>稳定性：Linux系统被认为是非常稳定的。在金融领域，系统的稳定性和可靠性至关重要，因为任何技术故障都可能对业务产生重大影响。因此，Linux成为了一个被广泛接受的选择。</li>
<li>灵活性：Linux的灵活性允许用户根据需求定制系统。在量化金融领域，可能需要使用各种不同的软件和工具来处理数据、进行模型开发和测试等。Linux允许用户更灵活地使用这些工具，并通过修改源代码来提高性能。</li>
<li>安全性：Linux的开源开发方式意味着错误可以更快地被暴露出来，这让技术人员可以更早地发现并解决潜在的安全隐患。此外，Linux对可能对系统产生安全隐患的远程程序调用进行了限制，进一步提高了系统的安全性。</li>
<li>可维护性：Linux系统的维护要求相对较高，需要一定的技术水平。但是，对于长期运行的功能需求，如备份历史行情数据和实时行情数据的入库和维护，Linux系统提供了高效的命令行方式，可以更快速地进行恢复和维护。</li>
</ol>
</blockquote>
<h2 id="12-安装-c-语言编译器--可选">1.2 安装 C 语言编译器 [ 可选 ]</h2>
<p>Rust 有的时候会依赖 libc 和链接器 linker， 比如PyTorch的C bindings的Rust版本tch.rs 就自然依赖C。因此如果遇到了提示链接器无法执行的错误，你需要再手动安装一个 C 语言编译器：</p>
<p><strong>MacOS</strong>：</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#82AAFF;--1:#3C63B3">xcode-select</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">--install</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="xcode-select --install"><div></div></button></div></figure></div>
<p><strong>Linux</strong>：
如果你使用 Ubuntu，则可安装 build-essential。
其他 Linux 用户一般应按照相应发行版的文档来安装 gcc 或 clang。</p>
<h2 id="13-维护-rust-工具链">1.3 维护 Rust 工具链</h2>
<h3 id="更新rust">更新Rust</h3>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#82AAFF;--1:#3C63B3">rustup</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">update</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="rustup update"><div></div></button></div></figure></div>
<h3 id="卸载rust">卸载Rust</h3>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#82AAFF;--1:#3C63B3">rustup</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">self</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">uninstall</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="rustup self uninstall"><div></div></button></div></figure></div>
<h3 id="检查rust安装是否成功--检查rustc版本">检查Rust安装是否成功 &#x26; 检查rustc版本</h3>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#82AAFF;--1:#3C63B3">rustc</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-V</span></div><div class="ec-line"><span style="--0:#82AAFF;--1:#3C63B3">rustc</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">1.72</span><span style="--0:#ECC48D;--1:#3C63B3">.0</span><span style="--0:#D6DEEB;--1:#403F53"> (5680fa18f </span><span style="--0:#F78C6C;--1:#AA0982">2023</span><span style="--0:#ECC48D;--1:#3C63B3">-08-23</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="rustc -Vrustc 1.72.0 (5680fa18f 2023-08-23)"><div></div></button></div></figure></div>
<h3 id="检查cargo版本">检查cargo版本</h3>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#82AAFF;--1:#3C63B3">cargo</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-V</span></div><div class="ec-line"><span style="--0:#82AAFF;--1:#3C63B3">cargo</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">1.72</span><span style="--0:#ECC48D;--1:#3C63B3">.0</span><span style="--0:#D6DEEB;--1:#403F53"> (103a7ff2e </span><span style="--0:#F78C6C;--1:#AA0982">2023</span><span style="--0:#ECC48D;--1:#3C63B3">-08-15</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="cargo -Vcargo 1.72.0 (103a7ff2e 2023-08-15)"><div></div></button></div></figure></div>
<h2 id="14-nightly-版本">1.4 Nightly 版本</h2>
<p>作为一门编程语言，Rust非常注重代码的稳定性。为了达到”稳定而不停滞”,Rust的开发遵循一个列车时刻表。也就是说，所有的开发工作都在Rust存储库的主分支上进行。Rust有三个发布通道：</p>
<ol>
<li><strong>夜间(Nightly)</strong></li>
<li><strong>测试(Beta)</strong></li>
<li><strong>稳定(Stable)</strong></li>
</ol>
<p>以下是开发和发布流程的示例：假设Rust团队正在开发Rust 1.5的版本。该版本在2015年12月发布，但我们可以用这个版本号来说明。Rust添加了一个新功能：新的提交被合并到主分支。每天晚上，都会生成一个新的Rust夜间版本。</p>
<p>对于Rust Nightly来说, 几乎每天都是发布日, 这些发布是由Rust社区的发布基建(release infrastructure)自动创建的。</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">nightly: * - - * - - *</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="nightly: * - - * - - *"><div></div></button></div></figure></div>
<p>每六个礼拜， <code dir="auto">beta</code> 分支都会从被夜间版本使用的 <code dir="auto">master</code> 分支中分叉出来, 单独发布一次。</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#82AAFF;--1:#3C63B3">nightly:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">*</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">*</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">*</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">                     </span><span style="--0:#7FDBCA;--1:#097174">|</span></div><div class="ec-line"><span style="--0:#82AAFF;--1:#3C63B3">beta:</span><span style="--0:#D6DEEB;--1:#403F53">                </span><span style="--0:#7FDBCA;--1:#097174">*</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="nightly: * - - * - - *                     |beta:                *"><div></div></button></div></figure></div>
<p>大多数Rust开发者主要使用 <strong>Stable</strong> 通道，但那些想尝试实验性新功能的人可以使用 <strong>Nightly</strong> 或 <strong>Beta</strong>。</p>
<p>Rust 编程语言的 Nightly 版本是不断更新的。有的时候为了用到 Rust 的最新的语言特性，或者安装一些依赖 Rust Nightly的软件包，我们会需要切换到 Nightly。</p>
<p>但是请注意，Nightly版本包含最新的功能和改进，所以也可能不够稳定，在生产环境中使用时要小心。</p>
<p><strong>安装Nightly版本</strong>：</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#82AAFF;--1:#3C63B3">rustup</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">install</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">nightly</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="rustup install nightly"><div></div></button></div></figure></div>
<p><strong>切换到Nightly版本</strong>：</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#82AAFF;--1:#3C63B3">rustup</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">default</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">nightly</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="rustup default nightly"><div></div></button></div></figure></div>
<p><strong>更新Nightly版本</strong>：</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#82AAFF;--1:#3C63B3">rustup</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">update</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">nightly</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="rustup update nightly"><div></div></button></div></figure></div>
<p><strong>切换回Stable版本：</strong></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#82AAFF;--1:#3C63B3">rustup</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">default</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">stable</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="rustup default stable"><div></div></button></div></figure></div>
<h2 id="15-cargo的使用">1.5 cargo的使用</h2>
<p><code dir="auto">cargo</code> 是 Rust 编程语言的官方构建工具和包管理器。它是一个非常强大的工具，用于帮助开发者创建、构建、测试和发布 Rust 项目。以下是一些 <code dir="auto">cargo</code> 的主要功能：</p>
<ol>
<li>
<p><strong>项目创建</strong>：
<code dir="auto">cargo new</code> 可以创建新的 Rust 项目，包括创建项目的基本结构、生成默认的源代码文件和配置文件。</p>
</li>
<li>
<p><strong>依赖管理</strong>：
<code dir="auto">cargo</code> 管理项目的依赖项。你可以在项目的 <code dir="auto">Cargo.toml</code> 文件中指定依赖项，然后运行 <code dir="auto">cargo build</code> 命令来下载和构建这些依赖项。这使得添加、更新和删除依赖项变得非常容易。</p>
</li>
<li>
<p><strong>构建项目</strong>：
通过运行 <code dir="auto">cargo build</code> 命令，你可以构建你的 Rust 项目。<code dir="auto">cargo</code> 会自动处理编译、链接和生成可执行文件或库的过程。</p>
</li>
<li>
<p><strong>添加依赖</strong>：
使用 cargo add 或编辑项目的 Cargo.toml 文件来添加依赖项。cargo add 命令会自动更新 Cargo.toml 并下载依赖项。
例如，要添加一个名为 “rand” 的依赖，可以运行：cargo add rand</p>
</li>
<li>
<p><strong>执行预先编纂的测试</strong>：</p>
<p><code dir="auto">cargo</code> 允许你编写和运行测试，以确保代码的正确性。你可以使用 <code dir="auto">cargo test</code> 命令来运行测试套件。</p>
</li>
<li>
<p><strong>文档生成</strong>：</p>
<p><code dir="auto">cargo</code> 可以自动生成项目文档。通过运行 <code dir="auto">cargo doc</code> 命令，如果我们的 <strong>文档注释</strong> (以///或者//！起始的注释) 符合Markdown规范，你可以生成包括库文档和文档注释的 HTML 文档，以便其他开发者查阅。</p>
</li>
<li>
<p><strong>发布和分发</strong>：</p>
<p>执行<code dir="auto">cargo login</code> 登陆 crate.io 后，再在项目文件夹执行<code dir="auto">cargo publish</code> 可以帮助你将你的 Rust 库发布到 <a href="https://crates.io/">crates.io</a>，Rust 生态系统的官方包仓库。这使得分享你的代码和库变得非常容易。</p>
</li>
<li>
<p><strong>列出依赖项</strong>：</p>
</li>
</ol>
<p>使用 cargo tree 命令可以查看项目的依赖项树，以了解你的项目使用了哪些库以及它们之间的依赖关系。例如，要查看依赖项树，只需在项目目录中运行：<code dir="auto">cargo tree</code></p>
<h2 id="16-cargo-和-rustup的区别">1.6 cargo 和 rustup的区别</h2>
<p><code dir="auto">rustup</code> 和<code dir="auto">cargo</code> 是 Rust 生态系统中两个不同的工具，各自承担着不同的任务：</p>
<p><code dir="auto">rustup</code> 和 <code dir="auto">cargo</code> 是 Rust 生态系统中两个不同的工具，各自承担着不同的任务：</p>
<p><strong><code dir="auto">rustup</code></strong>：</p>
<ul>
<li><code dir="auto">rustup</code> 是 Rust 工具链管理器。它用于安装、升级和管理不同版本的 Rust 编程语言。</li>
<li>通过 <code dir="auto">rustup</code>，你可以轻松地在你的计算机上安装多个 Rust 版本，以便在项目之间切换。</li>
<li>它还管理 Rust 工具链的组件，例如 Rust 标准库、Rustfmt(用于格式化代码的工具)等。</li>
<li><code dir="auto">rustup</code> 还提供了一些其他功能，如设置默认工具链、卸载 Rust 等。</li>
</ul>
<p><strong><code dir="auto">cargo</code></strong>：</p>
<ul>
<li><code dir="auto">cargo</code> 是 Rust 的构建工具和包管理器。它用于创建、构建和管理 Rust 项目。</li>
<li><code dir="auto">cargo</code> 可以创建新的 Rust 项目，添加依赖项，构建项目，运行测试，生成文档，发布库等等。</li>
<li>它提供了一种简便的方式来管理项目的依赖和构建过程，使得创建和维护 Rust 项目变得容易。</li>
<li>与构建相关的任务，如编译、运行测试、打包应用程序等，都可以通过 <code dir="auto">cargo</code> 来完成。</li>
</ul>
<p>总之，<code dir="auto">rustup</code> 主要用于管理 Rust 的版本和工具链，而 <code dir="auto">cargo</code> 用于管理和构建具体的 Rust 项目。这两个工具一起使得在 Rust 中开发和维护项目变得非常方便。</p>
<h2 id="17-用cargo创立并搭建第一个项目">1.7 用cargo创立并搭建第一个项目</h2>
<h3 id="1-用-cargo-new-project-name-新建项目">1. 用 <code dir="auto">cargo new &#x3C;project-name></code> 新建项目</h3>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#82AAFF;--1:#3C63B3">cargo</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">new_strategy</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#809191;--1:#616671"># new_strategy 是我们的新crate</span></div><div class="ec-line"><span style="--0:#C5E478;--1:#3C63B3">cd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">new_strategy</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="cargo new_strategy # new_strategy 是我们的新cratecd new_strategy"><div></div></button></div></figure></div>
<p>第一行命令新建了名为 <em>new_strategy</em> 的文件夹。我们将项目命名为 <em>new_strategy</em>，同时 cargo 在一个同名文件夹中创建树状分布的项目文件。</p>
<p>进入 <em>new_strategy</em> 文件夹, 然后键入<code dir="auto">ls</code>列出文件。将会看到 cargo 生成了两个文件和一个目录：一个 <em>Cargo.toml</em> 文件，一个 <em>src</em> 目录，以及位于 <em>src</em> 目录中的 <em>main.rs</em> 文件。</p>
<p>此时cargo在 <em>new_strategy</em> 文件夹初始化了一个 Git 仓库，并带有一个 <em>.gitignore</em> 文件。</p>
<blockquote>
<p>注意: cargo是默认使用git作为版本控制系统的(version control system， VCS)。可以通过 <code dir="auto">--vcs</code> 参数使 <code dir="auto">cargo new</code> 切换到其它版本控制系统，或者不使用 VCS。运行 <code dir="auto">cargo new --help</code> 查看可用的选项。</p>
</blockquote>
<h3 id="2-编辑-cargotoml">2. 编辑 <code dir="auto">cargo.toml</code></h3>
<p>现在可以找到项目文件夹中的 <em>cargo.toml</em> 文件。这应该是一个cargo 最小化工作样本(MWE, Minimal Working Example)的样子了。它看起来应该是如下这样：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">[package]</span></div><div class="ec-line"><span style="--0:#C5E478;--1:#3C63B3">name</span><span style="--0:#D6DEEB;--1:#403F53"> = </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">new_strategy</span><span style="--0:#D9F5DD;--1:#111111">"</span></div><div class="ec-line"><span style="--0:#C5E478;--1:#3C63B3">version</span><span style="--0:#D6DEEB;--1:#403F53"> = </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">0.1.0</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#809191;--1:#616671"># 此软件包的版本</span></div><div class="ec-line"><span style="--0:#C5E478;--1:#3C63B3">edition</span><span style="--0:#D6DEEB;--1:#403F53"> = </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">2021</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#809191;--1:#616671"># rust的规范版本，成书时最近一次更新是2021年。</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">[dependencies]</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="[package]name = &#x22;new_strategy&#x22;version = &#x22;0.1.0&#x22; # 此软件包的版本edition = &#x22;2021&#x22; # rust的规范版本，成书时最近一次更新是2021年。[dependencies]"><div></div></button></div></figure></div>
<p>第一行 <code dir="auto">[package]</code>，是一个 section 的标题，表明下面的语句用来配置一个包(package)。随着我们在这个文件增加更多的信息，还将增加其他 sections。</p>
<p>第二个 section 即<code dir="auto">[dependencies]</code> ，一般我们在这里填项目所依赖的任何包。</p>
<p>在 Rust 中，代码包被称为 <em>crate</em>。我们把crate的信息填写在这里以后，再运行cargo build, cargo就会自动下载并构建这个项目。虽然这个项目目前并不需要其他的 crate。</p>
<p>现在打开 new_strategy/<strong>src</strong>/main.rs* 看看：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">fn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">main</span><span style="--0:#D6DEEB;--1:#403F53">() {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">Hello, world!</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="fn main() {    println!(&#x22;Hello, world!&#x22;);}"><div></div></button></div></figure></div>
<p>cargo已经在 <code dir="auto">src</code> 文件夹为我们自动生成了一个 Hello, world! 程序。虽然看上去有点越俎代庖，但是这也是为了提醒我们，cargo 期望源代码文件(以rs后缀结尾的Rust语言文件)位于 <code dir="auto">src</code> 目录中。项目根目录只存放<strong>说明文件</strong>(README)、<strong>许可协议</strong>(license)信息、<strong>配置文件</strong> (cargo.toml)和其他跟代码无关的文件。使用 Cargo 可帮助你保持项目干净整洁。这里为一切事物所准备，一切都位于正确的位置。</p>
<h3 id="3-构建并运行-cargo-项目">3. 构建并运行 Cargo 项目</h3>
<p>现在在 <code dir="auto">new_strategy</code> 目录下，输入下面的命令来构建项目：</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#82AAFF;--1:#3C63B3">cargo</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">build</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#82AAFF;--1:#3C63B3">Compiling</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">new_strategy</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">v0.1.0</span><span style="--0:#D6DEEB;--1:#403F53"> (file:///projects/new_strategy)</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">Finished</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">dev</span><span style="--0:#D6DEEB;--1:#403F53"> [unoptimized </span><span style="--0:#ECC48D;--1:#3C63B3">+</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">debuginfo]</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">target</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#82AAFF;--1:#3C63B3">s</span><span style="--0:#D6DEEB;--1:#403F53">) </span><span style="--0:#ECC48D;--1:#3C63B3">in</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">2.85</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">secs</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="cargo build   Compiling new_strategy v0.1.0 (file:///projects/new_strategy)    Finished dev [unoptimized + debuginfo] target(s) in 2.85 secs"><div></div></button></div></figure></div>
<p>这个命令会在 <em>target/debug/new_strategy</em> 下创建一个可执行文件(在 Windows 上是 <em>target\debug\new_strategy.exe</em>)，而不是放在目前目录下。你可以使用下面的命令来运行它：</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#82AAFF;--1:#3C63B3">./target/debug/new_strategy</span></div><div class="ec-line"><span style="--0:#82AAFF;--1:#3C63B3">Hello,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">world!</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="./target/debug/new_strategyHello, world!"><div></div></button></div></figure></div>
<p>cargo 还提供了一te x t个名为 <code dir="auto">cargo check</code> 的命令。该命令快速检查代码确保其可以编译：</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#82AAFF;--1:#3C63B3">cargo</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">check</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#82AAFF;--1:#3C63B3">Checking</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">new_strategy</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">v0.1.0</span><span style="--0:#D6DEEB;--1:#403F53"> (file:///projects/new_strategy)</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">Finished</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">dev</span><span style="--0:#D6DEEB;--1:#403F53"> [unoptimized </span><span style="--0:#ECC48D;--1:#3C63B3">+</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">debuginfo]</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">target</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#82AAFF;--1:#3C63B3">s</span><span style="--0:#D6DEEB;--1:#403F53">) </span><span style="--0:#ECC48D;--1:#3C63B3">in</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">0.14</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">secs</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="cargo check   Checking new_strategy v0.1.0 (file:///projects/new_strategy)    Finished dev [unoptimized + debuginfo] target(s) in 0.14 secs"><div></div></button></div></figure></div>
<p>因为编译的耗时有时可以非常长，所以此时我们更改或修正代码后，并不会频繁执行<code dir="auto">cargo build</code>来重构项目，而是使用 <code dir="auto">cargo check</code>。</p>
<h3 id="4-发布构建">4. 发布构建</h3>
<p>当我们最终准备好交付代码时，可以使用 <code dir="auto">cargo build --release</code> 来优化编译项目。</p>
<p>这会在 而不是 <em>target/debug</em> 下生成可执行文件。这些优化可以让 Rust 代码运行的更快，不过启用这些优化也需要消耗显著更长的编译时间。</p>
<p>如果你要对代码运行时间进行基准测试，请确保运行 <code dir="auto">cargo build --release</code> 并使用 <em>target/release</em> 下的可执行文件进行测试。</p>
<h2 id="18-需要了解的几个rust概念">1.8 需要了解的几个Rust概念</h2>
<p>好的，让我为每个概念再提供一个更详细的案例，以帮助你更好地理解。</p>
<h3 id="作用域-scope">作用域 (Scope)</h3>
<p>作用域是指在代码中变量或值的可见性和有效性范围。在作用域内声明的变量或值可以在该作用域内使用，而在作用域外无法访问。简单来说，作用域决定了你在哪里可以使用一个变量或值。</p>
<p>在大多数编程语言中，作用域通常由大括号 <code dir="auto">{}</code> 来界定，例如在函数、循环、条件语句或代码块中。变量或值在进入作用域时创建，在离开作用域时销毁。这有助于确保程序的局部性和变量不会干扰其他部分的代码。</p>
<p>例如，在下面的Rust代码中，<code dir="auto">x</code> 变量的作用域在函数 <code dir="auto">main</code> 中，因此只能在函数内部使用：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">fn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">main</span><span style="--0:#D6DEEB;--1:#403F53">() {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">x</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">10</span><span style="--0:#D6DEEB;--1:#403F53">;</span><span style="--0:#809191;--1:#5E6578"> // 变量x的作用域从这里开始</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 在这里可以使用变量x</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span><span style="--0:#809191;--1:#5E6578"> // 变量x的作用域在这里结束，x被销毁</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="fn main() {    let x = 10; // 变量x的作用域从这里开始    // 在这里可以使用变量x} // 变量x的作用域在这里结束，x被销毁"><div></div></button></div></figure></div>
<p>总之，作用域是编程语言中用来控制变量和值可见性的概念，它确保了变量只在适当的地方可用，从而提高了代码的可维护性和安全性。在第6章我们还会详细讲解作用域 (Scope)。</p>
<h3 id="所有权-ownership">所有权 (Ownership)</h3>
<p>想象一下你有一个独特的玩具火车，只有你能够玩。这个火车是你的所有物。当你不再想玩这个火车时，你可以把它扔掉，它就不再存在了。在 Rust 中，每个值就像是这个玩具火车，有一个唯一的所有者。一旦所有者不再需要这个值，它会被销毁，这样就不会占用内存空间。</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">fn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">main</span><span style="--0:#D6DEEB;--1:#403F53">() {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">toy_train</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">Awesome train</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#7FDBCA;--1:#097174">.</span><span style="--0:#82AAFF;--1:#3C63B3">to_string</span><span style="--0:#D6DEEB;--1:#403F53">();</span><span style="--0:#809191;--1:#5E6578"> // 创建一个玩具火车</span></div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // toy_train 是它的所有者</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">train_name</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">get_name</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#7FDBCA;--1:#097174">&#x26;</span><span style="--0:#C5E478;--1:#3C63B3">toy_train</span><span style="--0:#D6DEEB;--1:#403F53">);</span><span style="--0:#809191;--1:#5E6578"> // 传递火车的引用</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">Train's name: {}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">train_name</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 接下来 toy_train 离开了main函数的作用域， 在main函数外面谁也不能再玩 toy_train了。</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">fn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">get_name</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C5E478;--1:#3C63B3">train</span><span style="--0:#7FDBCA;--1:#097174">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">&#x26;</span><span style="--0:#D6DEEB;--1:#403F53">String) </span><span style="--0:#7FDBCA;--1:#097174">-></span><span style="--0:#D6DEEB;--1:#403F53"> String {</span></div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 接受 String 的引用，不获取所有权</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C5E478;--1:#3C63B3">train</span><span style="--0:#7FDBCA;--1:#097174">.</span><span style="--0:#82AAFF;--1:#3C63B3">clone</span><span style="--0:#D6DEEB;--1:#403F53">()</span><span style="--0:#809191;--1:#5E6578"> // 返回火车的名字的拷贝</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="fn main() {    let toy_train = &#x22;Awesome train&#x22;.to_string(); // 创建一个玩具火车    // toy_train 是它的所有者    let train_name = get_name(&#x26;toy_train); // 传递火车的引用    println!(&#x22;Train&#x27;s name: {}&#x22;, train_name);    // 接下来 toy_train 离开了main函数的作用域， 在main函数外面谁也不能再玩 toy_train了。}fn get_name(train: &#x26;String) -> String {    // 接受 String 的引用，不获取所有权    train.clone() // 返回火车的名字的拷贝}"><div></div></button></div></figure></div>
<p>在这个例子中，我们创建了一个 <code dir="auto">toy_train</code> 的值，然后将它的引用传递给 <code dir="auto">get_name</code> 函数，而不是移动它的所有权。这样，函数可以读取 <code dir="auto">toy_train</code> 的数据，但 <code dir="auto">toy_train</code> 的所有权仍然在 <code dir="auto">main</code> 函数中。当 <code dir="auto">toy_train</code> 离开 <code dir="auto">main</code> 函数的作用域时，它的所有权被移动到函数内部，所以在函数外部不能再使用 <code dir="auto">toy_train</code>。</p>
<h3 id="可变性-mutability">可变性 (mutability)</h3>
<p>可变性(mutability)是指在编程中一个变量或数据是否可以被修改或改变的特性。在许多编程语言中，变量通常有二元对立的状态：可变(mutable)和不可变(immutable)。</p>
<ul>
<li>
<p><strong>可变 (Mutable)</strong>：如果一个变量是可变的，意味着你可以在创建后更改它的值。你可以对可变变量进行赋值操作，修改其中的数据。这在编程中非常常见，因为它允许程序在运行时动态地改变数据。</p>
</li>
<li>
<p><strong>不可变 (Immutable)</strong>：如果一个变量是不可变的，意味着一旦赋值后，就无法再更改其值。不可变变量在多线程编程和并发环境中非常有用，因为它们可以避免竞争条件和数据不一致性。</p>
</li>
</ul>
<p>在很多编程语言中，变量默认是可变的，但有些语言(如Rust)选择默认为不可变，需要显式地声明变量为可变才能进行修改。</p>
<p>在Rust中，可变性是一项强制性的特性，这意味着默认情况下变量是不可变的。如果你想要一个可变的变量，需要使用 <code dir="auto">mut</code> 关键字显式声明它。例如：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">fn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">main</span><span style="--0:#D6DEEB;--1:#403F53">() {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">x</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">10</span><span style="--0:#D6DEEB;--1:#403F53">;</span><span style="--0:#809191;--1:#5E6578"> // 不可变变量x</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">mut</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">y</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">20</span><span style="--0:#D6DEEB;--1:#403F53">;</span><span style="--0:#809191;--1:#5E6578"> // 可变变量y，可以修改其值</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C5E478;--1:#3C63B3">y</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">30</span><span style="--0:#D6DEEB;--1:#403F53">;</span><span style="--0:#809191;--1:#5E6578"> // 可以修改y的值</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="fn main() {    let x = 10; // 不可变变量x    let mut y = 20; // 可变变量y，可以修改其值    y = 30; // 可以修改y的值}"><div></div></button></div></figure></div>
<p>这种默认的不可变性有助于提高代码的安全性，因为它防止了意外的数据修改。但也允许你选择在需要时显式地声明变量为可变，以便进行修改。</p>
<h3 id="借用borrowing">借用(Borrowing)</h3>
<p>想象一下你有一本漫画书，你的朋友可以看，但不能把它带走或画在上面。你允许你的朋友借用这本书，但不能改变它。在 Rust 中，你可以创建共享引用，就像是让朋友看你的书，但不能修改它。</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">fn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">main</span><span style="--0:#D6DEEB;--1:#403F53">() {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">mut</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">comic_book</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">Spider-Man</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#7FDBCA;--1:#097174">.</span><span style="--0:#82AAFF;--1:#3C63B3">to_string</span><span style="--0:#D6DEEB;--1:#403F53">();</span><span style="--0:#809191;--1:#5E6578"> // 创建一本漫画书</span></div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // comic_book 是它的所有者</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">book_title</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">get_title</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#7FDBCA;--1:#097174">&#x26;</span><span style="--0:#C5E478;--1:#3C63B3">comic_book</span><span style="--0:#D6DEEB;--1:#403F53">);</span><span style="--0:#809191;--1:#5E6578"> // 传递书的引用</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">Book title: {}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">book_title</span><span style="--0:#D6DEEB;--1:#403F53">);</span><span style="--0:#809191;--1:#5E6578"> // 返回 "Book title: Spider-Man"</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">add_subtitle</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#7FDBCA;--1:#097174">&#x26;</span><span style="--0:#C792EA;--1:#8D46B4">mut</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">comic_book</span><span style="--0:#D6DEEB;--1:#403F53">);</span><span style="--0:#809191;--1:#5E6578"> // 尝试修改书，需要可变引用</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // comic_book 离开了作用域，它的所有权被移动到 get_title 函数</span></div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 这里不能再阅读或修改 comic_book</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">fn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">get_title</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C5E478;--1:#3C63B3">book</span><span style="--0:#7FDBCA;--1:#097174">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">&#x26;</span><span style="--0:#D6DEEB;--1:#403F53">String) </span><span style="--0:#7FDBCA;--1:#097174">-></span><span style="--0:#D6DEEB;--1:#403F53"> String {</span></div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 接受 String 的引用，不获取所有权</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C5E478;--1:#3C63B3">book</span><span style="--0:#7FDBCA;--1:#097174">.</span><span style="--0:#82AAFF;--1:#3C63B3">clone</span><span style="--0:#D6DEEB;--1:#403F53">()</span><span style="--0:#809191;--1:#5E6578"> // 返回书的标题的拷贝</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">fn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">add_subtitle</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C5E478;--1:#3C63B3">book</span><span style="--0:#7FDBCA;--1:#097174">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">&#x26;</span><span style="--0:#C792EA;--1:#8D46B4">mut</span><span style="--0:#D6DEEB;--1:#403F53"> String) {</span></div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 接受可变 String 的引用，可以修改书</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C5E478;--1:#3C63B3">book</span><span style="--0:#7FDBCA;--1:#097174">.</span><span style="--0:#82AAFF;--1:#3C63B3">push_str</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">: The Amazing Adventures</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="fn main() {    let mut comic_book = &#x22;Spider-Man&#x22;.to_string(); // 创建一本漫画书    // comic_book 是它的所有者    let book_title = get_title(&#x26;comic_book); // 传递书的引用    println!(&#x22;Book title: {}&#x22;, book_title); // 返回 &#x22;Book title: Spider-Man&#x22;    add_subtitle(&#x26;mut comic_book); // 尝试修改书，需要可变引用    // comic_book 离开了作用域，它的所有权被移动到 get_title 函数    // 这里不能再阅读或修改 comic_book}fn get_title(book: &#x26;String) -> String {    // 接受 String 的引用，不获取所有权    book.clone() // 返回书的标题的拷贝}fn add_subtitle(book: &#x26;mut String) {    // 接受可变 String 的引用，可以修改书    book.push_str(&#x22;: The Amazing Adventures&#x22;);}"><div></div></button></div></figure></div>
<p>在这个例子中，我们首先创建了一本漫画书 <code dir="auto">comic_book</code>，然后将它的引用传递给 <code dir="auto">get_title</code> 函数，而不是移动它的所有权。这样，函数可以读取 <code dir="auto">comic_book</code> 的数据，但不能修改它。然后，我们尝试调用 <code dir="auto">add_subtitle</code> 函数，该函数需要一个可变引用，因为它要修改书的内容。在rust中，对变量的写的权限，可以通过可变引用来控制。</p>
<h3 id="生命周期lifetime">生命周期(Lifetime)</h3>
<p>生命周期就像是你和朋友一起观看电影，但你必须确保电影结束前，你的朋友仍然在场。如果你的朋友提前离开，你不能再和他一起看电影。在 Rust 中，生命周期告诉编译器你的引用可以用多久，以确保引用不会指向已经消失的东西。这样可以防止出现问题。</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">fn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">main</span><span style="--0:#D6DEEB;--1:#403F53">() {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">result</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">number</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">42</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#C5E478;--1:#3C63B3">result</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">get_value</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#7FDBCA;--1:#097174">&#x26;</span><span style="--0:#C5E478;--1:#3C63B3">number</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    }</span><span style="--0:#809191;--1:#5E6578"> // number 离开了作用域，但 result 的引用仍然有效</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">Result: {}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">result</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">fn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">get_value</span><span style="--0:#D6DEEB;--1:#403F53">&#x3C;'a>(</span><span style="--0:#C5E478;--1:#3C63B3">val</span><span style="--0:#7FDBCA;--1:#097174">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">&#x26;</span><span style="--0:#D6DEEB;--1:#403F53">'a i32) </span><span style="--0:#7FDBCA;--1:#097174">-></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">&#x26;</span><span style="--0:#D6DEEB;--1:#403F53">'a i32 {</span></div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 接受 i32 的引用，返回相同生命周期的引用</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C5E478;--1:#3C63B3">val</span><span style="--0:#809191;--1:#5E6578"> // 返回 val 的引用，其生命周期与 val 相同</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="fn main() {    let result;    {        let number = 42;        result = get_value(&#x26;number);    } // number 离开了作用域，但 result 的引用仍然有效    println!(&#x22;Result: {}&#x22;, result);}fn get_value<&#x27;a>(val: &#x26;&#x27;a i32) -> &#x26;&#x27;a i32 {    // 接受 i32 的引用，返回相同生命周期的引用    val // 返回 val 的引用，其生命周期与 val 相同}"><div></div></button></div></figure></div>
<p>在这个示例中，我们创建了一个整数 <code dir="auto">number</code>，然后将它的引用传递给 <code dir="auto">get_value</code> 函数，并使用生命周期 <code dir="auto">'a</code> 来标注引用的有效性。函数返回的引用的生命周期与传入的引用 <code dir="auto">val</code> 相同，因此它仍然有效，即使 <code dir="auto">number</code> 离开了作用域。</p>
<p>这些案例希望帮助你更容易理解 Rust 中的所有权、借用和生命周期这三个概念。这些概念是 Rust 的核心，有助于确保你的代码既安全又高效。</p> </div> <footer class="astro-w7wtsaw6"> <div class="meta sl-flex astro-w7wtsaw6">   </div> <div class="pagination-links astro-qnftudm7" dir="ltr">  <a href="/chapters/chapter_2/" rel="next" class="astro-qnftudm7"> <svg aria-hidden="true" class="astro-qnftudm7 astro-xrndq6a6" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.5rem;"><path d="M17.92 11.62a1.001 1.001 0 0 0-.21-.33l-5-5a1.003 1.003 0 1 0-1.42 1.42l3.3 3.29H7a1 1 0 0 0 0 2h7.59l-3.3 3.29a1.002 1.002 0 0 0 .325 1.639 1 1 0 0 0 1.095-.219l5-5a1 1 0 0 0 .21-.33 1 1 0 0 0 0-.76Z"/></svg>  <span class="astro-qnftudm7"> Next <br class="astro-qnftudm7"> <span class="link-title astro-qnftudm7">2. 格式化输出</span> </span> </a> </div>  </footer>  </div> </div>   </main> </div> </div>  </div> </div>  </body></html>