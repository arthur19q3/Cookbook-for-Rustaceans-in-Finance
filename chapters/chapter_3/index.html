<!DOCTYPE html><html lang="en" dir="ltr" data-has-toc data-has-sidebar class="astro-fpze62lo"> <head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>原生类型 | Cookbook for Rustaceans in Finance / Rust 量化金融开发指南</title><link rel="canonical"/><link rel="shortcut icon" href="/favicon.svg" type="image/svg+xml"/><meta name="generator" content="Astro v4.3.3"/><meta name="generator" content="Starlight v0.17.3"/><meta property="og:title" content="原生类型"/><meta property="og:type" content="article"/><meta property="og:url"/><meta property="og:locale" content="en"/><meta property="og:description"/><meta property="og:site_name" content="Cookbook for Rustaceans in Finance / Rust 量化金融开发指南"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="原生类型"/><meta name="twitter:description"/><script>
	window.StarlightThemeProvider = (() => {
		const storedTheme =
			typeof localStorage !== 'undefined' && localStorage.getItem('starlight-theme');
		const theme =
			storedTheme ||
			(window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark');
		document.documentElement.dataset.theme = theme === 'light' ? 'light' : 'dark';
		return {
			updatePickers(theme = storedTheme || 'auto') {
				document.querySelectorAll('starlight-theme-select').forEach((picker) => {
					const select = picker.querySelector('select');
					if (select) select.value = theme;
					/** @type {HTMLTemplateElement | null} */
					const tmpl = document.querySelector(`#theme-icons`);
					const newIcon = tmpl && tmpl.content.querySelector('.' + theme);
					if (newIcon) {
						const oldIcon = picker.querySelector('svg.label-icon');
						if (oldIcon) {
							oldIcon.replaceChildren(...newIcon.cloneNode(true).childNodes);
						}
					}
				});
			},
		};
	})();
</script><template id="theme-icons"><svg aria-hidden="true" class="light astro-xrndq6a6" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M5 12a1 1 0 0 0-1-1H3a1 1 0 0 0 0 2h1a1 1 0 0 0 1-1Zm.64 5-.71.71a1 1 0 0 0 0 1.41 1 1 0 0 0 1.41 0l.71-.71A1 1 0 0 0 5.64 17ZM12 5a1 1 0 0 0 1-1V3a1 1 0 0 0-2 0v1a1 1 0 0 0 1 1Zm5.66 2.34a1 1 0 0 0 .7-.29l.71-.71a1 1 0 1 0-1.41-1.41l-.66.71a1 1 0 0 0 0 1.41 1 1 0 0 0 .66.29Zm-12-.29a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.71-.71a1.004 1.004 0 1 0-1.43 1.41l.73.71ZM21 11h-1a1 1 0 0 0 0 2h1a1 1 0 0 0 0-2Zm-2.64 6A1 1 0 0 0 17 18.36l.71.71a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.76-.66ZM12 6.5a5.5 5.5 0 1 0 5.5 5.5A5.51 5.51 0 0 0 12 6.5Zm0 9a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7Zm0 3.5a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1a1 1 0 0 0-1-1Z"/></svg> <svg aria-hidden="true" class="dark astro-xrndq6a6" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.64 13a1 1 0 0 0-1.05-.14 8.049 8.049 0 0 1-3.37.73 8.15 8.15 0 0 1-8.14-8.1 8.59 8.59 0 0 1 .25-2A1 1 0 0 0 8 2.36a10.14 10.14 0 1 0 14 11.69 1 1 0 0 0-.36-1.05Zm-9.5 6.69A8.14 8.14 0 0 1 7.08 5.22v.27a10.15 10.15 0 0 0 10.14 10.14 9.784 9.784 0 0 0 2.1-.22 8.11 8.11 0 0 1-7.18 4.32v-.04Z"/></svg> <svg aria-hidden="true" class="auto astro-xrndq6a6" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg> </template><link rel="stylesheet" href="/_astro/index.4lckRRHb.css" /><script type="module" src="/_astro/hoisted.RLbdawI7.js"></script>
<script type="module" src="/_astro/page.X_0NJa-z.js"></script></head> <body class="astro-fpze62lo"> <a href="#_top" class="astro-byjsuuaw">Skip to content</a>  <div class="page sl-flex astro-yxqmbg7i"> <header class="header astro-yxqmbg7i"><div class="header sl-flex astro-cyrhhlnw"> <div class="title-wrapper sl-flex astro-cyrhhlnw"> <a href="/" class="site-title sl-flex astro-ylanx5mn">  <span class="astro-ylanx5mn"> Cookbook for Rustaceans in Finance / Rust 量化金融开发指南 </span> </a>  </div> <div class="sl-flex astro-cyrhhlnw"> <site-search data-translations="{&#34;placeholder&#34;:&#34;Search&#34;}" class="astro-usz5hgcn"> <button data-open-modal disabled class="astro-usz5hgcn">  <svg aria-label="Search" class="astro-usz5hgcn astro-xrndq6a6" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.71 20.29 18 16.61A9 9 0 1 0 16.61 18l3.68 3.68a.999.999 0 0 0 1.42 0 1 1 0 0 0 0-1.39ZM11 18a7 7 0 1 1 0-14 7 7 0 0 1 0 14Z"/></svg>  <span class="sl-hidden md:sl-block astro-usz5hgcn" aria-hidden="true">Search</span> <svg aria-label="(Press / to Search)" class="sl-hidden md:sl-block astro-usz5hgcn astro-xrndq6a6" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 2H7a5 5 0 0 0-5 5v10a5 5 0 0 0 5 5h10a5 5 0 0 0 5-5V7a5 5 0 0 0-5-5Zm3 15a3 3 0 0 1-3 3H7a3 3 0 0 1-3-3V7a3 3 0 0 1 3-3h10a3 3 0 0 1 3 3v10Z"/><path d="M15.293 6.707a1 1 0 1 1 1.414 1.414l-8.485 8.486a1 1 0 0 1-1.414-1.415l8.485-8.485Z"/></svg>  </button> <dialog style="padding:0" aria-label="Search" class="astro-usz5hgcn"> <div class="dialog-frame sl-flex astro-usz5hgcn">  <button data-close-modal class="sl-flex md:sl-hidden astro-usz5hgcn"> Cancel </button> <div class="search-container astro-usz5hgcn"> <div id="starlight__search" class="astro-usz5hgcn"></div> </div> </div> </dialog> </site-search>    </div> <div class="sl-hidden md:sl-flex right-group astro-cyrhhlnw"> <div class="sl-flex social-icons astro-cyrhhlnw"> <a href="https://github.com/withastro/starlight" rel="me" class="sl-flex astro-3daxh4jc"><span class="sr-only astro-3daxh4jc">GitHub</span><svg aria-hidden="true" class="astro-3daxh4jc astro-xrndq6a6" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg> </a> </div> <starlight-theme-select>  <label style="--sl-select-width: 6.25em" class="astro-kc6u4lxd"> <span class="sr-only astro-kc6u4lxd">Select theme</span> <svg aria-hidden="true" class="icon label-icon astro-kc6u4lxd astro-xrndq6a6" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg>  <select value="auto" class="astro-kc6u4lxd"> <option value="dark" class="astro-kc6u4lxd">Dark</option><option value="light" class="astro-kc6u4lxd">Light</option><option value="auto" selected="true" class="astro-kc6u4lxd">Auto</option> </select> <svg aria-hidden="true" class="icon caret astro-kc6u4lxd astro-xrndq6a6" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </label>  </starlight-theme-select>  <script>
	StarlightThemeProvider.updatePickers();
</script>   </div> </div> </header> <nav class="sidebar astro-yxqmbg7i" aria-label="Main"> <starlight-menu-button class="astro-eouth4v3"> <button aria-expanded="false" aria-label="Menu" aria-controls="starlight__sidebar" class="sl-flex md:sl-hidden astro-eouth4v3"> <svg aria-hidden="true" class="astro-eouth4v3 astro-xrndq6a6" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M3 8h18a1 1 0 1 0 0-2H3a1 1 0 0 0 0 2Zm18 8H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Zm0-5H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Z"/></svg>  </button> </starlight-menu-button>    <div id="starlight__sidebar" class="sidebar-pane astro-yxqmbg7i"> <div class="sidebar-content sl-flex astro-yxqmbg7i"> <ul class="top-level astro-4mcqxzkb"> <li class="astro-4mcqxzkb"> <details open class="astro-4mcqxzkb"> <summary class="astro-4mcqxzkb"> <div class="group-label astro-4mcqxzkb"> <span class="large astro-4mcqxzkb">PART I 基础部分 - 量化语境下的Rust编程基础</span>  </div> <svg aria-hidden="true" class="caret astro-4mcqxzkb astro-xrndq6a6" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-4mcqxzkb"> <li class="astro-4mcqxzkb"> <a href="/chapters/chapter_1" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">1. Rust 语言入门101</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_2/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">2. 格式化输出</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_3/" aria-current="page" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">3. 原生类型</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_4/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">4. 自定义类型 Struct &amp; Enum</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_5/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">5. 标准库类型</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_6/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">6. 变量和作用域</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_7/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">7. 类型系统</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_8/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">8. 类型转换</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_9/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">9. 流程控制</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_10/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">10. 函数、方法和闭包</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_11/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">11. 模块</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_12/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">12. Cargo 的进阶使用</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_13/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">13. 属性(Attributes)</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_14/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">14. 泛型进阶(Advanced Generic Type Usage)</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_15/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">15. 作用域规则和生命周期</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_16/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">16. 错误处理进阶(Advanced Error handling)</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_17/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">17. 特性(trait)详解</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_18/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">18. 创建自定义宏</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_19/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">19. 时间处理</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_20/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">20. Redis、爬虫、交易日库</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_21/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">21. 线程和管道</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_22/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">22. 文件处理</span>  </a> </li> </ul>  </details> </li><li class="astro-4mcqxzkb"> <details open class="astro-4mcqxzkb"> <summary class="astro-4mcqxzkb"> <div class="group-label astro-4mcqxzkb"> <span class="large astro-4mcqxzkb">PART II 进阶部分 - 量化实战</span>  </div> <svg aria-hidden="true" class="caret astro-4mcqxzkb astro-xrndq6a6" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-4mcqxzkb"> <li class="astro-4mcqxzkb"> <a href="/chapters/chapter_23/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">23. Polars 入门</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_24/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">24. 时序数据库 Clickhouse</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_25/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">25. Unsafe【未完成】</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_26/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">26. 文档和测试【未完成】</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_27/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">27. 常见技术指标及其实现【本章代码未添加】</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_28/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">28. 统计模型【未完成】</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_29/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">29. 引擎系统【未完成】</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_30/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">30. 日志系统【未完成】</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_31/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">31. 投资组合管理【未完成】</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_32/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">32. 量化计量经济学【未完成】</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_33/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">33. 限价指令簿【未完成】</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_34/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">34. 最优配置和执行【未完成】</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_35/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">35. 信息学、监管、风控【未完成】</span>  </a> </li><li class="astro-4mcqxzkb"> <a href="/chapters/chapter_36/" class="astro-4mcqxzkb"> <span class="astro-4mcqxzkb">36. 机器学习【未完成】</span>  </a> </li> </ul>  </details> </li> </ul>  <div class="md:sl-hidden"> <div class="mobile-preferences sl-flex astro-vfur2aw5"> <div class="sl-flex social-icons astro-vfur2aw5"> <a href="https://github.com/withastro/starlight" rel="me" class="sl-flex astro-3daxh4jc"><span class="sr-only astro-3daxh4jc">GitHub</span><svg aria-hidden="true" class="astro-3daxh4jc astro-xrndq6a6" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg> </a> </div> <starlight-theme-select>  <label style="--sl-select-width: 6.25em" class="astro-kc6u4lxd"> <span class="sr-only astro-kc6u4lxd">Select theme</span> <svg aria-hidden="true" class="icon label-icon astro-kc6u4lxd astro-xrndq6a6" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg>  <select value="auto" class="astro-kc6u4lxd"> <option value="dark" class="astro-kc6u4lxd">Dark</option><option value="light" class="astro-kc6u4lxd">Light</option><option value="auto" selected="true" class="astro-kc6u4lxd">Auto</option> </select> <svg aria-hidden="true" class="icon caret astro-kc6u4lxd astro-xrndq6a6" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </label>  </starlight-theme-select>  <script>
	StarlightThemeProvider.updatePickers();
</script>   </div>  </div> </div> </div> </nav> <div class="main-frame astro-yxqmbg7i">  <div class="lg:sl-flex astro-3vvvt7cz"> <aside class="right-sidebar-container astro-3vvvt7cz"> <div class="right-sidebar astro-3vvvt7cz"> <div class="lg:sl-hidden astro-f63w33c6"><mobile-starlight-toc data-min-h="2" data-max-h="3" class="astro-q2mrqdva"><nav aria-labelledby="starlight__on-this-page--mobile" class="astro-q2mrqdva"><details id="starlight__mobile-toc" class="astro-q2mrqdva"><summary id="starlight__on-this-page--mobile" class="sl-flex astro-q2mrqdva"><div class="toggle sl-flex astro-q2mrqdva">On this page<svg aria-hidden="true" class="caret astro-q2mrqdva astro-xrndq6a6" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </div><span class="display-current astro-q2mrqdva"></span></summary><div class="dropdown astro-q2mrqdva"><ul class="isMobile astro-acifyk5h" style="--depth: 0;"> <li class="astro-acifyk5h" style="--depth: 0;"> <a href="#_top" class="astro-acifyk5h" style="--depth: 0;"> <span class="astro-acifyk5h" style="--depth: 0;">Overview</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 0;"> <a href="#31-字面量-运算符-和字符串" class="astro-acifyk5h" style="--depth: 0;"> <span class="astro-acifyk5h" style="--depth: 0;">3.1 字面量, 运算符 和字符串</span> </a> <ul class="isMobile astro-acifyk5h" style="--depth: 1;"> <li class="astro-acifyk5h" style="--depth: 1;"> <a href="#311-字面量literals" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">3.1.1 字面量(Literals)</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#312-运算符operators" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">3.1.2 运算符(Operators)</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#补充学习-逻辑运算符" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">补充学习: 逻辑运算符</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#补充学习-移动运算符" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">补充学习: 移动运算符</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#313-字符串切片-str" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">3.1.3 字符串切片 (&amp;str)</span> </a>  </li> </ul>  </li><li class="astro-acifyk5h" style="--depth: 0;"> <a href="#32-元组-tuple" class="astro-acifyk5h" style="--depth: 0;"> <span class="astro-acifyk5h" style="--depth: 0;">3.2 元组 (Tuple)</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 0;"> <a href="#33-数组" class="astro-acifyk5h" style="--depth: 0;"> <span class="astro-acifyk5h" style="--depth: 0;">3.3 数组</span> </a> <ul class="isMobile astro-acifyk5h" style="--depth: 1;"> <li class="astro-acifyk5h" style="--depth: 1;"> <a href="#案例1简单移动平均线计算器-sma-calculator" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">案例1：简单移动平均线计算器 (SMA Calculator)</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#补充学习-范围设置" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">补充学习: 范围设置</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#案例2-指数移动平均线计算器-ema-calculator" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">案例2： 指数移动平均线计算器 (EMA Calculator)</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#补充学习-平滑因子alpha" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">补充学习: 平滑因子alpha</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#案例3-相对强度指数relative-strength-indexrsi" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">案例3 相对强度指数(Relative Strength Index，RSI)</span> </a>  </li> </ul>  </li><li class="astro-acifyk5h" style="--depth: 0;"> <a href="#34-切片" class="astro-acifyk5h" style="--depth: 0;"> <span class="astro-acifyk5h" style="--depth: 0;">3.4 切片</span> </a> <ul class="isMobile astro-acifyk5h" style="--depth: 1;"> <li class="astro-acifyk5h" style="--depth: 1;"> <a href="#补充学习-fold函数" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">补充学习: fold函数</span> </a>  </li> </ul>  </li> </ul> </div></details></nav></mobile-starlight-toc></div><div class="right-sidebar-panel sl-hidden lg:sl-block astro-f63w33c6"><div class="sl-container astro-f63w33c6"><starlight-toc data-min-h="2" data-max-h="3"><nav aria-labelledby="starlight__on-this-page"><h2 id="starlight__on-this-page">On this page</h2><ul class="astro-acifyk5h" style="--depth: 0;"> <li class="astro-acifyk5h" style="--depth: 0;"> <a href="#_top" class="astro-acifyk5h" style="--depth: 0;"> <span class="astro-acifyk5h" style="--depth: 0;">Overview</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 0;"> <a href="#31-字面量-运算符-和字符串" class="astro-acifyk5h" style="--depth: 0;"> <span class="astro-acifyk5h" style="--depth: 0;">3.1 字面量, 运算符 和字符串</span> </a> <ul class="astro-acifyk5h" style="--depth: 1;"> <li class="astro-acifyk5h" style="--depth: 1;"> <a href="#311-字面量literals" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">3.1.1 字面量(Literals)</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#312-运算符operators" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">3.1.2 运算符(Operators)</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#补充学习-逻辑运算符" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">补充学习: 逻辑运算符</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#补充学习-移动运算符" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">补充学习: 移动运算符</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#313-字符串切片-str" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">3.1.3 字符串切片 (&amp;str)</span> </a>  </li> </ul>  </li><li class="astro-acifyk5h" style="--depth: 0;"> <a href="#32-元组-tuple" class="astro-acifyk5h" style="--depth: 0;"> <span class="astro-acifyk5h" style="--depth: 0;">3.2 元组 (Tuple)</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 0;"> <a href="#33-数组" class="astro-acifyk5h" style="--depth: 0;"> <span class="astro-acifyk5h" style="--depth: 0;">3.3 数组</span> </a> <ul class="astro-acifyk5h" style="--depth: 1;"> <li class="astro-acifyk5h" style="--depth: 1;"> <a href="#案例1简单移动平均线计算器-sma-calculator" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">案例1：简单移动平均线计算器 (SMA Calculator)</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#补充学习-范围设置" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">补充学习: 范围设置</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#案例2-指数移动平均线计算器-ema-calculator" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">案例2： 指数移动平均线计算器 (EMA Calculator)</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#补充学习-平滑因子alpha" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">补充学习: 平滑因子alpha</span> </a>  </li><li class="astro-acifyk5h" style="--depth: 1;"> <a href="#案例3-相对强度指数relative-strength-indexrsi" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">案例3 相对强度指数(Relative Strength Index，RSI)</span> </a>  </li> </ul>  </li><li class="astro-acifyk5h" style="--depth: 0;"> <a href="#34-切片" class="astro-acifyk5h" style="--depth: 0;"> <span class="astro-acifyk5h" style="--depth: 0;">3.4 切片</span> </a> <ul class="astro-acifyk5h" style="--depth: 1;"> <li class="astro-acifyk5h" style="--depth: 1;"> <a href="#补充学习-fold函数" class="astro-acifyk5h" style="--depth: 1;"> <span class="astro-acifyk5h" style="--depth: 1;">补充学习: fold函数</span> </a>  </li> </ul>  </li> </ul> </nav></starlight-toc></div></div> </div> </aside> <div class="main-pane astro-3vvvt7cz">  <main data-pagefind-body lang="en" dir="ltr" class="astro-fpze62lo">    <div class="content-panel astro-vo2eo5fg"> <div class="sl-container astro-vo2eo5fg"> <h1 id="_top" class="astro-daoses2n">原生类型</h1>  </div> </div>  <div class="content-panel astro-vo2eo5fg"> <div class="sl-container astro-vo2eo5fg"> <div class="sl-markdown-content"> <p><code dir="auto">"原生类型"(Primitive Types)</code>是计算机科学中的一个通用术语，通常用于描述编程语言中的基本数据类型。Rust中的原生类型被称为原生，因为它们是语言的基础构建块，通常由编译器和底层硬件直接支持。以下是为什么这些类型被称为原生类型的几个原因：</p>
<ol>
<li><strong>硬件支持</strong>：原生类型通常能够直接映射到底层硬件的数据表示方式。例如，<code dir="auto">i32</code> 和 <code dir="auto">f64</code> 类型通常直接对应于CPU中整数和浮点数寄存器的存储格式，因此在运行时效率较高。</li>
<li><strong>编译器优化</strong>：由于原生类型的表示方式是直接的，编译器可以进行有效的优化，以在代码执行时获得更好的性能。这意味着原生类型的操作通常比自定义类型更快速。</li>
<li><strong>标准化</strong>：原生类型是语言标准的一部分，因此在不同的Rust编译器和环境中具有相同的语义。这意味着你可以跨平台使用这些类型，而无需担心不同系统上的行为不一致。</li>
<li><strong>内存布局可控</strong>：原生类型的内存布局是明确的，因此你可以精确地控制数据在内存中的存储方式。这对于与外部系统进行交互、编写系统级代码或进行底层内存操作非常重要。</li>
</ol>
<p>Rust 中有一些原生数据类型，用于表示基本的数据值。以下是一些常见的原生数据类型：</p>
<ol>
<li>
<p><strong>整数类型</strong>：</p>
<ul>
<li><code dir="auto">i8</code>：有符号8位整数</li>
<li><code dir="auto">i16</code>：有符号16位整数</li>
<li><code dir="auto">i32</code>：有符号32位整数</li>
<li><code dir="auto">i64</code>：有符号64位整数</li>
<li><code dir="auto">i128</code>：有符号128位整数</li>
<li><code dir="auto">u8</code>：无符号8位整数</li>
<li><code dir="auto">u16</code>：无符号16位整数</li>
<li><code dir="auto">u32</code>：无符号32位整数</li>
<li><code dir="auto">u64</code>：无符号64位整数</li>
<li><code dir="auto">u128</code>：无符号128位整数</li>
<li><code dir="auto">isize</code>：有符号机器字大小的整数</li>
<li><code dir="auto">usize</code>：无符号机器字大小的整数</li>
</ul>
<p>以下是一个使用各种整数类型的 案例，演示了不同整数类型的用法：</p>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.usa2f.css"><script type="module" src="/_astro/ec.sgewm.js"></script><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">fn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">main</span><span style="--0:#D6DEEB;--1:#403F53">() {</span></div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 有符号整数类型</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">i8_num</span><span style="--0:#7FDBCA;--1:#097174">:</span><span style="--0:#D6DEEB;--1:#403F53"> i8 </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">-</span><span style="--0:#F78C6C;--1:#AA0982">42</span><span style="--0:#D6DEEB;--1:#403F53">;</span><span style="--0:#809191;--1:#5E6578">   // 8位有符号整数，范围：-128 到 127</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">i16_num</span><span style="--0:#7FDBCA;--1:#097174">:</span><span style="--0:#D6DEEB;--1:#403F53"> i16 </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">-</span><span style="--0:#F78C6C;--1:#AA0982">1000</span><span style="--0:#D6DEEB;--1:#403F53">;</span><span style="--0:#809191;--1:#5E6578"> // 16位有符号整数，范围：-32,768 到 32,767</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">i32_num</span><span style="--0:#7FDBCA;--1:#097174">:</span><span style="--0:#D6DEEB;--1:#403F53"> i32 </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">200000</span><span style="--0:#D6DEEB;--1:#403F53">;</span><span style="--0:#809191;--1:#5E6578"> // 32位有符号整数，范围：-2,147,483,648 到 2,147,483,647</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">i64_num</span><span style="--0:#7FDBCA;--1:#097174">:</span><span style="--0:#D6DEEB;--1:#403F53"> i64 </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">-</span><span style="--0:#F78C6C;--1:#AA0982">9000000000</span><span style="--0:#D6DEEB;--1:#403F53">;</span><span style="--0:#809191;--1:#5E6578"> // 64位有符号整数，范围：-9,223,372,036,854,775,808 到 9,223,372,036,854,775,807</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">i128_num</span><span style="--0:#7FDBCA;--1:#097174">:</span><span style="--0:#D6DEEB;--1:#403F53"> i128 </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">10000000000000000000000000000000</span><span style="--0:#D6DEEB;--1:#403F53">;</span><span style="--0:#809191;--1:#5E6578"> // 128位有符号整数</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 无符号整数类型</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">u8_num</span><span style="--0:#7FDBCA;--1:#097174">:</span><span style="--0:#D6DEEB;--1:#403F53"> u8 </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">255</span><span style="--0:#D6DEEB;--1:#403F53">;</span><span style="--0:#809191;--1:#5E6578"> // 8位无符号整数，范围：0 到 255</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">u16_num</span><span style="--0:#7FDBCA;--1:#097174">:</span><span style="--0:#D6DEEB;--1:#403F53"> u16 </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">60000</span><span style="--0:#D6DEEB;--1:#403F53">;</span><span style="--0:#809191;--1:#5E6578"> // 16位无符号整数，范围：0 到 65,535</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">u32_num</span><span style="--0:#7FDBCA;--1:#097174">:</span><span style="--0:#D6DEEB;--1:#403F53"> u32 </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">4000000000</span><span style="--0:#D6DEEB;--1:#403F53">;</span><span style="--0:#809191;--1:#5E6578"> // 32位无符号整数，范围：0 到 4,294,967,295</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">u64_num</span><span style="--0:#7FDBCA;--1:#097174">:</span><span style="--0:#D6DEEB;--1:#403F53"> u64 </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">18000000000000000000</span><span style="--0:#D6DEEB;--1:#403F53">;</span><span style="--0:#809191;--1:#5E6578"> // 64位无符号整数，范围：0 到 18,446,744,073,709,551,615</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">u128_num</span><span style="--0:#7FDBCA;--1:#097174">:</span><span style="--0:#D6DEEB;--1:#403F53"> u128 </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">340282366920938463463374607431768211455</span><span style="--0:#D6DEEB;--1:#403F53">;</span><span style="--0:#809191;--1:#5E6578"> // 128位无符号整数</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 打印各个整数类型的值</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">i8: {}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">i8_num</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">i16: {}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">i16_num</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">i32: {}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">i32_num</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">i64: {}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">i64_num</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">i128: {}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">i128_num</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">u8: {}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">u8_num</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">u16: {}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">u16_num</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">u32: {}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">u32_num</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">u64: {}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">u64_num</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">u128: {}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">u128_num</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="fn main() {    // 有符号整数类型    let i8_num: i8 = -42;   // 8位有符号整数，范围：-128 到 127    let i16_num: i16 = -1000; // 16位有符号整数，范围：-32,768 到 32,767    let i32_num: i32 = 200000; // 32位有符号整数，范围：-2,147,483,648 到 2,147,483,647    let i64_num: i64 = -9000000000; // 64位有符号整数，范围：-9,223,372,036,854,775,808 到 9,223,372,036,854,775,807    let i128_num: i128 = 10000000000000000000000000000000; // 128位有符号整数    // 无符号整数类型    let u8_num: u8 = 255; // 8位无符号整数，范围：0 到 255    let u16_num: u16 = 60000; // 16位无符号整数，范围：0 到 65,535    let u32_num: u32 = 4000000000; // 32位无符号整数，范围：0 到 4,294,967,295    let u64_num: u64 = 18000000000000000000; // 64位无符号整数，范围：0 到 18,446,744,073,709,551,615    let u128_num: u128 = 340282366920938463463374607431768211455; // 128位无符号整数    // 打印各个整数类型的值    println!(&#x22;i8: {}&#x22;, i8_num);    println!(&#x22;i16: {}&#x22;, i16_num);    println!(&#x22;i32: {}&#x22;, i32_num);    println!(&#x22;i64: {}&#x22;, i64_num);    println!(&#x22;i128: {}&#x22;, i128_num);    println!(&#x22;u8: {}&#x22;, u8_num);    println!(&#x22;u16: {}&#x22;, u16_num);    println!(&#x22;u32: {}&#x22;, u32_num);    println!(&#x22;u64: {}&#x22;, u64_num);    println!(&#x22;u128: {}&#x22;, u128_num);}"><div></div></button></div></figure></div>
<p><strong>执行结果:</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">i8: -42</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">i16: -1000</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">i32: 200000</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">i64: -9000000000</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">i128: 10000000000000000000000000000000</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">u8: 255</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">u16: 60000</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">u32: 4000000000</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">u64: 18000000000000000000</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">u128: 340282366920938463463374607431768211455</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="i8: -42i16: -1000i32: 200000i64: -9000000000i128: 10000000000000000000000000000000u8: 255u16: 60000u32: 4000000000u64: 18000000000000000000u128: 340282366920938463463374607431768211455"><div></div></button></div></figure></div>
</li>
<li>
<p><strong>浮点数类型</strong>：</p>
<ul>
<li><code dir="auto">f32</code>：32位浮点数</li>
<li><code dir="auto">f64</code>：64位浮点数(双精度浮点数)</li>
</ul>
<p>以下是一个 演示各种浮点数类型及其范围的案例：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">fn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">main</span><span style="--0:#D6DEEB;--1:#403F53">() {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">f32_num</span><span style="--0:#7FDBCA;--1:#097174">:</span><span style="--0:#D6DEEB;--1:#403F53"> f32 </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">3.14</span><span style="--0:#D6DEEB;--1:#403F53">;</span><span style="--0:#809191;--1:#5E6578"> // 32位浮点数，范围：约 -3.4e38 到 3.4e38，精度约为7位小数</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">f64_num</span><span style="--0:#7FDBCA;--1:#097174">:</span><span style="--0:#D6DEEB;--1:#403F53"> f64 </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">3.141592653589793238</span><span style="--0:#D6DEEB;--1:#403F53">;</span><span style="--0:#809191;--1:#5E6578"> // 64位浮点数，范围：约 -1.7e308 到 1.7e308，精度约为15位小数</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 打印各个浮点数类型的值</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">f32: {}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">f32_num</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">f64: {}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">f64_num</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="fn main() {    let f32_num: f32 = 3.14; // 32位浮点数，范围：约 -3.4e38 到 3.4e38，精度约为7位小数    let f64_num: f64 = 3.141592653589793238; // 64位浮点数，范围：约 -1.7e308 到 1.7e308，精度约为15位小数    // 打印各个浮点数类型的值    println!(&#x22;f32: {}&#x22;, f32_num);    println!(&#x22;f64: {}&#x22;, f64_num);}"><div></div></button></div></figure></div>
<p><strong>执行结果:</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">f32: 3.14</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">f64: 3.141592653589793</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="f32: 3.14f64: 3.141592653589793"><div></div></button></div></figure></div>
</li>
<li>
<p><strong>布尔类型</strong>：</p>
<p><code dir="auto">bool</code>：表示布尔值，可以是 <code dir="auto">true</code> 或 <code dir="auto">false</code>。</p>
<p>在rust中, 布尔值 bool 可以直接拿来当if语句的判断条件。</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">fn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">main</span><span style="--0:#D6DEEB;--1:#403F53">() {</span></div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 模拟股票价格数据</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">stock_price</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">150.0</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 定义交易策略条件</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">buy_condition</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">stock_price</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">&#x3C;</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">160.0</span><span style="--0:#D6DEEB;--1:#403F53">;</span><span style="--0:#809191;--1:#5E6578"> // 如果股价低于160，满足购买条件</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">sell_condition</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">stock_price</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">170.0</span><span style="--0:#D6DEEB;--1:#403F53">;</span><span style="--0:#809191;--1:#5E6578"> // 如果股价高于170，满足卖出条件</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 执行交易策略</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">if</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">buy_condition</span><span style="--0:#D6DEEB;--1:#403F53"> {</span><span style="--0:#809191;--1:#5E6578">  //buy_condition此时已经是一个布尔值, 可以直接拿来当if语句的判断条件</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">购买股票：股价为 {}，满足购买条件。</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">stock_price</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    } </span><span style="--0:#C792EA;--1:#8D46B4">else</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">if</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">sell_condition</span><span style="--0:#D6DEEB;--1:#403F53"> {</span><span style="--0:#809191;--1:#5E6578"> //sell_condition 同理也已是一个布尔值, 可以当if语句的判断条件</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">卖出股票：股价为 {}，满足卖出条件。</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">stock_price</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    } </span><span style="--0:#C792EA;--1:#8D46B4">else</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">不执行交易：股价为 {}，没有满足的交易条件。</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">stock_price</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    }</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="fn main() {    // 模拟股票价格数据    let stock_price = 150.0;    // 定义交易策略条件    let buy_condition = stock_price < 160.0; // 如果股价低于160，满足购买条件    let sell_condition = stock_price > 170.0; // 如果股价高于170，满足卖出条件    // 执行交易策略    if buy_condition {  //buy_condition此时已经是一个布尔值, 可以直接拿来当if语句的判断条件        println!(&#x22;购买股票：股价为 {}，满足购买条件。&#x22;, stock_price);    } else if sell_condition { //sell_condition 同理也已是一个布尔值, 可以当if语句的判断条件        println!(&#x22;卖出股票：股价为 {}，满足卖出条件。&#x22;, stock_price);    } else {        println!(&#x22;不执行交易：股价为 {}，没有满足的交易条件。&#x22;, stock_price);    }}"><div></div></button></div></figure></div>
<p><strong>执行结果:</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">购买股票：股价为 150，满足购买条件。</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="购买股票：股价为 150，满足购买条件。"><div></div></button></div></figure></div>
</li>
<li>
<p><strong>字符类型</strong>：</p>
<p><code dir="auto">char</code>：表示<strong>单个</strong> Unicode 字符。</p>
<p>Rust的字符类型char具有以下特征:</p>
<ol>
<li><strong>Unicode 支持</strong>：几乎所有现代编程语言都提供了对Unicode字符的支持，因为Unicode已成为全球标准字符集。Rust 的 <code dir="auto">char</code> 类型当然也是 Unicode 兼容的，这意味着它可以表示任何有效的 Unicode 字符，包括 ASCII 字符和其他语言中的特殊字符。</li>
<li><strong>32 位宽度</strong>：<code dir="auto">char</code>类型使用UTF-32编码来表示Unicode字符，一个<code dir="auto">char</code>实际上是一个长度为 1 的 UCS-4 / UTF-32 字符串。。这确保了<code dir="auto">char</code>类型可以容纳任何Unicode字符，因为UTF-32编码的码点范围覆盖了Unicode字符集的所有字符。<code dir="auto">char</code> 类型的值是 Unicode 标量值(即不是代理项的代码点)，表示为 0x0000 到 0xD7FF 或 0xE000 到 0x10FFFF 范围内的 32 位无符号字。创建一个超出此范围的 <code dir="auto">char</code> 会立即被编译器认为是未定义行为。</li>
<li><strong>字符字面量</strong>：<code dir="auto">char</code> 类型的字符字面量使用单引号括起来，例如 <code dir="auto">'A'</code> 或 <code dir="auto">'❤'</code>。这些字符字面量可以直接赋值给 <code dir="auto">char</code> 变量。</li>
<li><strong>字符转义序列</strong>：与字符串一样，<code dir="auto">char</code> 字面量也支持转义序列，例如 <code dir="auto">'\n'</code> 表示换行字符。</li>
<li><strong>UTF-8 字符串</strong>：Rust 中的字符串类型 <code dir="auto">String</code> 是 UTF-8 编码的，这与 <code dir="auto">char</code> 类型兼容，因为 UTF-8 是一种可变长度编码，可以表示各种字符。</li>
<li><strong>字符迭代</strong>：你可以使用迭代器来处理字符串中的每个字符，例如使用 <code dir="auto">chars()</code> 方法。这使得遍历和操作字符串中的字符非常方便。</li>
</ol>
<p><code dir="auto">char</code> 类型的特性可以用于处理和表示与金融数据和分析相关的各种字符和符号。以下是一些展示如何在量化金融环境中利用 <code dir="auto">char</code> 特性的示例：</p>
<ol>
<li>
<p><strong>表示货币符号</strong>：<code dir="auto">char</code> 可以用于表示货币符号，例如美元符号 <code dir="auto">$</code> 或欧元符号 <code dir="auto">€</code>。这对于在金融数据中标识货币类型非常有用。</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">fn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">main</span><span style="--0:#D6DEEB;--1:#403F53">() {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">usd_symbol</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#9B504E">'$'</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">eur_symbol</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#9B504E">'€'</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">美元符号: {}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">usd_symbol</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">欧元符号: {}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">eur_symbol</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="fn main() {    let usd_symbol = &#x27;$&#x27;;    let eur_symbol = &#x27;€&#x27;;    println!(&#x22;美元符号: {}&#x22;, usd_symbol);    println!(&#x22;欧元符号: {}&#x22;, eur_symbol);}"><div></div></button></div></figure></div>
<p><strong>执行结果:</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">美元符号: $</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">欧元符号: €</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="美元符号: $欧元符号: €"><div></div></button></div></figure></div>
</li>
<li>
<p><strong>表示期权合约种类</strong>：在这个示例中，我们使用 <code dir="auto">char</code> 类型来表示期权合约类型，‘P’ 代表put期权合约，‘C’ 代表call期权合约。根据不同的合约类型，我们执行不同的操作。这种方式可以用于在金融交易中确定期权合约的类型，从而执行相应的交易策略。</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">fn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">main</span><span style="--0:#D6DEEB;--1:#403F53">() {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">contract_type</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#9B504E">'P'</span><span style="--0:#D6DEEB;--1:#403F53">;</span><span style="--0:#809191;--1:#5E6578"> // 代表put期权合约</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">match</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">contract_type</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#ECC48D;--1:#9B504E">'P'</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">=></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">执行put期权合约。</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">),</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#ECC48D;--1:#9B504E">'C'</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">=></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">执行call期权合约。</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">),</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#C5E478;--1:#3C63B3">_</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">=></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">未知的期权合约类型。</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">),</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    }</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="fn main() {    let contract_type = &#x27;P&#x27;; // 代表put期权合约    match contract_type {        &#x27;P&#x27; => println!(&#x22;执行put期权合约。&#x22;),        &#x27;C&#x27; => println!(&#x22;执行call期权合约。&#x22;),        _ => println!(&#x22;未知的期权合约类型。&#x22;),    }}"><div></div></button></div></figure></div>
<p><strong>执行结果:</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">执行put期权合约。</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="执行put期权合约。"><div></div></button></div></figure></div>
</li>
<li>
<p><strong>处理特殊字符</strong>：金融数据中可能包含特殊字符，例如百分比符号 <code dir="auto">%</code> 或乘号 <code dir="auto">*</code>。<code dir="auto">char</code> 类型允许你在处理这些字符时更容易地执行各种操作。</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">fn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">main</span><span style="--0:#D6DEEB;--1:#403F53">() {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">percentage</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">5.0</span><span style="--0:#D6DEEB;--1:#403F53">;</span><span style="--0:#809191;--1:#5E6578"> // 百分比 5%</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">multi_sign</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#9B504E">'*'</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 在计算中使用百分比</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">value</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">10.0</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">result</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">value</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">*</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#C5E478;--1:#3C63B3">percentage</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">/</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">100.0</span><span style="--0:#D6DEEB;--1:#403F53">);</span><span style="--0:#809191;--1:#5E6578"> // 将百分比转换为小数进行计算</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">{}% {} {} = {}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">percentage</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">multi_sign</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">value</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">result</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="fn main() {    let percentage = 5.0; // 百分比 5%    let multi_sign = &#x27;*&#x27;;    // 在计算中使用百分比    let value = 10.0;    let result = value * (percentage / 100.0); // 将百分比转换为小数进行计算    println!(&#x22;{}% {} {} = {}&#x22;, percentage, multi_sign, value, result);}"><div></div></button></div></figure></div>
<p><strong>执行结果:</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">5% * 10 = 0.5</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="5% * 10 = 0.5"><div></div></button></div></figure></div>
</li>
</ol>
<p><code dir="auto">char</code> 类型的特性使得你能够更方便地处理和识别与金融数据和符号相关的字符，从而更好地支持金融数据分析和展示。</p>
</li>
</ol>
<h2 id="31-字面量-运算符-和字符串">3.1 字面量, 运算符 和字符串</h2>
<p>Rust语言中，你可以使用不同类型的字面量来表示不同的数据类型，包括整数、浮点数、字符、字符串、布尔值以及单元类型。以下是关于Rust字面量和运算符的简要总结：</p>
<h3 id="311-字面量literals">3.1.1 字面量(Literals)</h3>
<p>当你编写 Rust 代码时，你会遇到各种不同类型的字面量，它们用于表示不同类型的值。以下是一些常见的字面量类型和示例：</p>
<ol>
<li>
<p><strong>整数字面量(Integer Literals)</strong>：用于表示整数值，例如：</p>
<ul>
<li>十进制整数：<code dir="auto">10</code></li>
<li>十六进制整数：<code dir="auto">0x1F</code></li>
<li>八进制整数：<code dir="auto">0o77</code></li>
<li>二进制整数：<code dir="auto">0b1010</code></li>
</ul>
</li>
<li>
<p><strong>浮点数字面量(Floating-Point Literals)</strong>：用于表示带小数点的数值，例如：</p>
<ul>
<li>浮点数：<code dir="auto">3.14</code></li>
<li>科学计数法：<code dir="auto">2.0e5</code></li>
</ul>
</li>
<li>
<p><strong>字符字面量(Character Literals)</strong>：用于表示单个字符，使用单引号括起来，例如：</p>
<ul>
<li>字符 ：<code dir="auto">'A'</code></li>
<li>转义字符 ：<code dir="auto">'\n'</code></li>
</ul>
</li>
<li>
<p><strong>字符串字面量(String Literals)</strong>：用于表示文本字符串，使用双引号括起来，例如：</p>
<ul>
<li>字符串 ：<code dir="auto">"Hello, World!"</code></li>
</ul>
</li>
<li>
<p><strong>布尔字面量(Boolean Literals)</strong>：用于表示真(<code dir="auto">true</code>)或假(<code dir="auto">false</code>)的值，例如：</p>
<ul>
<li>布尔值 ：<code dir="auto">true</code></li>
<li>布尔值：<code dir="auto">false</code></li>
</ul>
</li>
<li>
<p><strong>单元类型(Unit Type)</strong>：表示没有有意义的返回值的情况，通常表示为 <code dir="auto">()</code>，例如：</p>
<ul>
<li>函数返回值：<code dir="auto">fn do_something() -> () { }</code></li>
</ul>
</li>
</ol>
<p>你还可以在数字字面量中插入下划线 <code dir="auto">_</code> 以提高可读性，例如 <code dir="auto">1_000</code> 和 <code dir="auto">0.000_001</code>，它们分别等同于1000和0.000001。这些字面量类型用于初始化变量、传递参数和表示数据的各种值。</p>
<h3 id="312-运算符operators">3.1.2 运算符(Operators)</h3>
<p>在 Rust 中，常见的运算符包括：</p>
<ol>
<li><strong>算术运算符(Arithmetic Operators)</strong>：
<ul>
<li><code dir="auto">+</code>(加法)：将两个数相加，例如 <code dir="auto">a + b</code>。</li>
<li><code dir="auto">-</code>(减法)：将右边的数从左边的数中减去，例如 <code dir="auto">a - b</code>。</li>
<li><code dir="auto">*</code>(乘法)：将两个数相乘，例如 <code dir="auto">a * b</code>。</li>
<li><code dir="auto">/</code>(除法)：将左边的数除以右边的数，例如 <code dir="auto">a / b</code>。</li>
<li><code dir="auto">%</code>(取余)：返回左边的数除以右边的数的余数，例如 <code dir="auto">a % b</code>。</li>
</ul>
</li>
<li><strong>比较运算符(Comparison Operators)</strong>：
<ul>
<li><code dir="auto">==</code>(等于)：检查左右两边的值是否相等，例如 <code dir="auto">a == b</code>。</li>
<li><code dir="auto">!=</code>(不等于)：检查左右两边的值是否不相等，例如 <code dir="auto">a != b</code>。</li>
<li><code dir="auto">&#x3C;</code>(小于)：检查左边的值是否小于右边的值，例如 <code dir="auto">a &#x3C; b</code>。</li>
<li><code dir="auto">></code>(大于)：检查左边的值是否大于右边的值，例如 <code dir="auto">a > b</code>。</li>
<li><code dir="auto">&#x3C;=</code>(小于等于)：检查左边的值是否小于或等于右边的值，例如 <code dir="auto">a &#x3C;= b</code>。</li>
<li><code dir="auto">>=</code>(大于等于)：检查左边的值是否大于或等于右边的值，例如 <code dir="auto">a >= b</code>。</li>
</ul>
</li>
<li><strong>逻辑运算符(Logical Operators)</strong>：
<ul>
<li><code dir="auto">&#x26;&#x26;</code>(逻辑与)：用于组合两个条件，只有当两个条件都为真时才为真，例如 <code dir="auto">condition1 &#x26;&#x26; condition2</code>。</li>
<li><code dir="auto">||</code>(逻辑或)：用于组合两个条件，只要其中一个条件为真就为真，例如 <code dir="auto">condition1 || condition2</code>。</li>
<li><code dir="auto">!</code>(逻辑非)：用于取反一个条件，将真变为假，假变为真，例如 <code dir="auto">!condition</code>。</li>
</ul>
</li>
<li><strong>赋值运算符(Assignment Operators)</strong>：
<ul>
<li><code dir="auto">=</code>(赋值)：将右边的值赋给左边的变量，例如 <code dir="auto">a = b</code>。</li>
<li><code dir="auto">+=</code>(加法赋值)：将左边的变量与右边的值相加，并将结果赋给左边的变量，例如 <code dir="auto">a += b</code> 相当于 <code dir="auto">a = a + b</code>。</li>
<li><code dir="auto">-=</code>(减法赋值)：将左边的变量与右边的值相减，并将结果赋给左边的变量，例如 <code dir="auto">a -= b</code> 相当于 <code dir="auto">a = a - b</code>。</li>
</ul>
</li>
<li><strong>位运算符(Bitwise Operators)</strong>：
<ul>
<li><code dir="auto">&#x26;</code>(按位与)：对两个数的每一位执行与操作，例如 <code dir="auto">a &#x26; b</code>。</li>
<li><code dir="auto">|</code>(按位或)：对两个数的每一位执行或操作，例如 <code dir="auto">a | b</code>。</li>
<li><code dir="auto">^</code>(按位异或)：对两个数的每一位执行异或操作，例如 <code dir="auto">a ^ b</code>。</li>
</ul>
</li>
</ol>
<p>这些运算符在 Rust 中用于执行各种数学、逻辑和位操作，使你能够编写灵活和高效的代码。</p>
<p>现在把这些运算符带到实际场景来看一下：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">fn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">main</span><span style="--0:#D6DEEB;--1:#403F53">() {</span></div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 加法运算：整数相加</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">3 + 7 = {}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">3u32</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">+</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">7</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 减法运算：整数相减</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">10 减去 4 = {}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">10i32</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">4</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 逻辑运算：布尔值的组合</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">true 与 false 的与运算结果是：{}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">&#x26;&#x26;</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">false</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">true 或 false 的或运算结果是：{}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">||</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">false</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">true 的非运算结果是：{}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C792EA;--1:#8D46B4">!</span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 赋值运算：变量值的更新</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">mut</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">x</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">8</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C5E478;--1:#3C63B3">x</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">+=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">5</span><span style="--0:#D6DEEB;--1:#403F53">;</span><span style="--0:#809191;--1:#5E6578"> // 等同于 x = x + 5</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">x 现在的值是：{}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">x</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 位运算：二进制位的操作</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">0101 和 0010 的与运算结果是：{:04b}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">0b0101u32</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">&#x26;</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">0b0010</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">0101 和 0010 的或运算结果是：{:04b}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">0b0101u32</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">|</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">0b0010</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">0101 和 0010 的异或运算结果是：{:04b}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">0b0101u32</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">^</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">0b0010</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">2 左移 3 位的结果是：{}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">2u32</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">&#x3C;&#x3C;</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">3</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">0xC0 右移 4 位的结果是：0x{:x}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">0xC0u32</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">>></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">4</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 使用下划线增加数字的可读性</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">一千可以表示为：{}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">1_000u32</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="fn main() {    // 加法运算：整数相加    println!(&#x22;3 + 7 = {}&#x22;, 3u32 + 7);    // 减法运算：整数相减    println!(&#x22;10 减去 4 = {}&#x22;, 10i32 - 4);    // 逻辑运算：布尔值的组合    println!(&#x22;true 与 false 的与运算结果是：{}&#x22;, true &#x26;&#x26; false);    println!(&#x22;true 或 false 的或运算结果是：{}&#x22;, true || false);    println!(&#x22;true 的非运算结果是：{}&#x22;, !true);    // 赋值运算：变量值的更新    let mut x = 8;    x += 5; // 等同于 x = x + 5    println!(&#x22;x 现在的值是：{}&#x22;, x);    // 位运算：二进制位的操作    println!(&#x22;0101 和 0010 的与运算结果是：{:04b}&#x22;, 0b0101u32 &#x26; 0b0010);    println!(&#x22;0101 和 0010 的或运算结果是：{:04b}&#x22;, 0b0101u32 | 0b0010);    println!(&#x22;0101 和 0010 的异或运算结果是：{:04b}&#x22;, 0b0101u32 ^ 0b0010);    println!(&#x22;2 左移 3 位的结果是：{}&#x22;, 2u32 << 3);    println!(&#x22;0xC0 右移 4 位的结果是：0x{:x}&#x22;, 0xC0u32 >> 4);    // 使用下划线增加数字的可读性    println!(&#x22;一千可以表示为：{}&#x22;, 1_000u32);}"><div></div></button></div></figure></div>
<p><strong>执行结果:</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">3 + 7 = 10</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">10 减去 4 = 6</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">true 与 false 的与运算结果是：false</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">true 或 false 的或运算结果是：true</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">true 的非运算结果是：false</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">x 现在的值是：13</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">0101 和 0010 的与运算结果是：0000</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">0101 和 0010 的或运算结果是：0111</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">0101 和 0010 的异或运算结果是：0111</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">2 左移 3 位的结果是：16</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">0xC0 右移 4 位的结果是：0xc</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">一千可以表示为：1000</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="3 + 7 = 1010 减去 4 = 6true 与 false 的与运算结果是：falsetrue 或 false 的或运算结果是：truetrue 的非运算结果是：falsex 现在的值是：130101 和 0010 的与运算结果是：00000101 和 0010 的或运算结果是：01110101 和 0010 的异或运算结果是：01112 左移 3 位的结果是：160xC0 右移 4 位的结果是：0xc一千可以表示为：1000"><div></div></button></div></figure></div>
<h3 id="补充学习-逻辑运算符">补充学习: 逻辑运算符</h3>
<p>逻辑运算中有三种基本操作：与(AND)、或(OR)、异或(XOR)，用来操作二进制位。</p>
<ol>
<li>
<p>0011 与 0101 为 0001(AND运算)：
这个运算符表示两个二进制数的对应位都为1时，结果位为1，否则为0。在这个例子中，我们对每一对位进行AND运算：</p>
<ul>
<li>第一个位：0 AND 0 = 0</li>
<li>第二个位：0 AND 1 = 0</li>
<li>第三个位：1 AND 0 = 0</li>
<li>第四个位：1 AND 1 = 1
因此，结果为 0001。</li>
</ul>
</li>
<li>
<p>0011 或 0101 为 0111(OR运算)：
这个运算符表示两个二进制数的对应位中只要有一个为1，结果位就为1。在这个例子中，我们对每一对位进行OR运算：</p>
<ul>
<li>第一个位：0 OR 0 = 0</li>
<li>第二个位：0 OR 1 = 1</li>
<li>第三个位：1 OR 0 = 1</li>
<li>第四个位：1 OR 1 = 1
因此，结果为 0111。</li>
</ul>
</li>
<li>
<p>0011 异或 0101 为 0110(XOR运算)：
这个运算符表示两个二进制数的对应位相同则结果位为0，不同则结果位为1。在这个例子中，我们对每一对位进行XOR运算：</p>
<ul>
<li>第一个位：0 XOR 0 = 0</li>
<li>第二个位：0 XOR 1 = 1</li>
<li>第三个位：1 XOR 0 = 1</li>
<li>第四个位：1 XOR 1 = 0
因此，结果为 0110。</li>
</ul>
</li>
</ol>
<p>这些逻辑运算在计算机中广泛应用于位操作和布尔代数中，它们用于创建复杂的逻辑电路、控制程序和数据处理。</p>
<h3 id="补充学习-移动运算符">补充学习: 移动运算符</h3>
<p>这涉及到位运算符的工作方式，特别是左移运算符(<code dir="auto">&#x3C;&#x3C;</code>)和右移运算符(<code dir="auto">>></code>)。让我为你解释一下：</p>
<ol>
<li>
<p><code dir="auto">为什么1 左移 5 位为 32</code>：</p>
<ul>
<li><code dir="auto">1</code> 表示二进制数字 <code dir="auto">0001</code>。</li>
<li>左移运算符 <code dir="auto">&#x3C;&#x3C;</code> 将二进制数字向左移动指定的位数。</li>
<li>在这里，<code dir="auto">1u32 &#x3C;&#x3C; 5</code> 表示将二进制数字 <code dir="auto">0001</code> 向左移动5位。</li>
<li>移动5位后，变成了 <code dir="auto">100000</code>，这是二进制中的32。</li>
<li>因此，<code dir="auto">1 左移 5 位</code> 等于 <code dir="auto">32</code>。</li>
</ul>
</li>
<li>
<p>为什么<code dir="auto">0x80 右移 2 位为 0x20</code>：</p>
<ul>
<li><code dir="auto">0x80</code> 表示十六进制数字，其二进制表示为 <code dir="auto">10000000</code>。</li>
<li>右移运算符 <code dir="auto">>></code> 将二进制数字向右移动指定的位数。</li>
<li>在这里，<code dir="auto">0x80u32 >> 2</code> 表示将二进制数字 <code dir="auto">10000000</code> 向右移动2位。</li>
<li>移动2位后，变成了 <code dir="auto">00100000</code>，这是二进制中的32。</li>
<li>以十六进制表示，<code dir="auto">0x20</code> 表示32。</li>
<li>因此，<code dir="auto">0x80 右移 2 位</code> 等于 <code dir="auto">0x20</code>。</li>
</ul>
</li>
</ol>
<p>这些运算是基于二进制和十六进制的移动，因此结果不同于我们平常的十进制表示方式。左移操作会使数值变大，而右移操作会使数值变小。</p>
<h3 id="313-字符串切片-str">3.1.3 字符串切片 (&#x26;str)</h3>
<p><code dir="auto">&#x26;str</code> 是 Rust 中的字符串切片类型，表示对一个已有字符串的引用或视图。它是一个非拥有所有权的、不可变的字符串类型，具有以下特性和用途：</p>
<ol>
<li>
<p><strong>不拥有所有权</strong>：<code dir="auto">&#x26;str</code> 不拥有底层字符串的内存，它只是一个对字符串的引用。这意味着当 <code dir="auto">&#x26;str</code> 超出其作用域时，不会释放底层字符串的内存，因为它不拥有该内存。这有助于避免内存泄漏。</p>
</li>
<li>
<p><strong>不可变性</strong>：<code dir="auto">&#x26;str</code> 是不可变的，一旦创建，就不能更改其内容。这意味着你不能像 <code dir="auto">String</code> 那样在 <code dir="auto">&#x26;str</code> 上进行修改操作，例如添加字符。</p>
</li>
<li>
<p><strong>UTF-8 字符串</strong>：Rust 确保 <code dir="auto">&#x26;str</code> 指向有效的 UTF-8 字符序列，因此它是一种安全的字符串类型，不会包含无效的字符。</p>
</li>
<li>
<p><strong>切片操作</strong>：你可以使用切片操作来创建 <code dir="auto">&#x26;str</code>，从现有字符串中获取子字符串。</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">my_string</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">Hello, world!</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">my_slice</span><span style="--0:#7FDBCA;--1:#097174">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">&#x26;</span><span style="--0:#D6DEEB;--1:#403F53">str </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">&#x26;</span><span style="--0:#C5E478;--1:#3C63B3">my_string</span><span style="--0:#D6DEEB;--1:#403F53">[</span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#7FDBCA;--1:#097174">..</span><span style="--0:#F78C6C;--1:#AA0982">5</span><span style="--0:#D6DEEB;--1:#403F53">];</span><span style="--0:#809191;--1:#5E6578"> // 创建一个字符串切片</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="let my_string = &#x22;Hello, world!&#x22;;let my_slice: &#x26;str = &#x26;my_string[0..5]; // 创建一个字符串切片"><div></div></button></div></figure></div>
</li>
<li>
<p><strong>函数参数和返回值</strong>：<code dir="auto">&#x26;str</code> 常用于函数参数和返回值，因为它允许你传递字符串的引用而不是整个字符串，从而避免不必要的所有权转移。</p>
</li>
</ol>
<p><strong>示例：</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">fn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">main</span><span style="--0:#D6DEEB;--1:#403F53">() {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">greeting</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">Hello, world!</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">slice</span><span style="--0:#7FDBCA;--1:#097174">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">&#x26;</span><span style="--0:#D6DEEB;--1:#403F53">str </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">&#x26;</span><span style="--0:#C5E478;--1:#3C63B3">greeting</span><span style="--0:#D6DEEB;--1:#403F53">[</span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#7FDBCA;--1:#097174">..</span><span style="--0:#F78C6C;--1:#AA0982">5</span><span style="--0:#D6DEEB;--1:#403F53">];</span><span style="--0:#809191;--1:#5E6578"> // 创建字符串切片</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">{}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">slice</span><span style="--0:#D6DEEB;--1:#403F53">);</span><span style="--0:#809191;--1:#5E6578"> // 输出 "Hello"</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="fn main() {    let greeting = &#x22;Hello, world!&#x22;;    let slice: &#x26;str = &#x26;greeting[0..5]; // 创建字符串切片    println!(&#x22;{}&#x22;, slice); // 输出 &#x22;Hello&#x22;}"><div></div></button></div></figure></div>
<p>总之，<code dir="auto">&#x26;str</code> 是一种轻量级、安全且灵活的字符串类型，常用于读取字符串内容、函数参数、以及字符串切片操作。通过使用 <code dir="auto">&#x26;str</code>，Rust 提供了一种有效管理字符串的方式，同时保持内存安全性。</p>
<p>在Rust中，字符串是一个重要的数据类型，用于存储文本和字符数据。字符串在量化金融领域以及其他编程领域中广泛使用，用于表示和处理金融数据、交易记录、报告生成等任务。</p>
<p>此处要注意的是，在Rust中，有<strong>两种主要的字符串类型</strong>：</p>
<ul>
<li><code dir="auto">String</code>：动态字符串，可变且在堆上分配内存。<code dir="auto">String</code> 类型通常用于需要修改字符串内容的情况，比如拼接、替换等操作。在第五章我们还会详细介绍这个类型。</li>
<li><code dir="auto">&#x26;str</code>:字符串切片, 不可变的字符串引用，通常在栈上分配。<code dir="auto">&#x26;str</code> 通常用于只需访问字符串而不需要修改它的情况，也是函数参数中常见的类型。</li>
</ul>
<p>在Rust中，<code dir="auto">String</code> 和 <code dir="auto">&#x26;str</code> 字符串类型的区别可以用金融实例来解释。假设我们正在编写一个金融应用程序，需要处理股票数据。</p>
<ol>
<li><strong>使用 <code dir="auto">String</code>：</strong></li>
</ol>
<p>如果我们需要在应用程序中动态构建、修改和处理字符串，例如拼接多个股票代码或构建复杂的查询语句，我们可能会选择使用 <code dir="auto">String</code> 类型。这是因为 <code dir="auto">String</code> 是可变的，允许我们在运行时修改其内容。</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">fn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">main</span><span style="--0:#D6DEEB;--1:#403F53">() {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">mut</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">stock_symbol</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> String</span><span style="--0:#7FDBCA;--1:#097174">::</span><span style="--0:#82AAFF;--1:#3C63B3">from</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">AAPL</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 在运行时追加字符串</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C5E478;--1:#3C63B3">stock_symbol</span><span style="--0:#7FDBCA;--1:#097174">.</span><span style="--0:#82AAFF;--1:#3C63B3">push_str</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">(NASDAQ)</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">Stock Symbol: {}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">stock_symbol</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="fn main() {    let mut stock_symbol = String::from(&#x22;AAPL&#x22;);    // 在运行时追加字符串    stock_symbol.push_str(&#x22;(NASDAQ)&#x22;);    println!(&#x22;Stock Symbol: {}&#x22;, stock_symbol);}"><div></div></button></div></figure></div>
<p><strong>执行结果:</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">Stock Symbol: AAPL(NASDAQ)</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="Stock Symbol: AAPL(NASDAQ)"><div></div></button></div></figure></div>
<p>在这个示例中，我们创建了一个可变的 <code dir="auto">String</code> 变量 <code dir="auto">stock_symbol</code>，然后在运行时追加了”(NASDAQ)“字符串。这种灵活性对于金融应用程序中的动态字符串操作非常有用。</p>
<ol start="2">
<li><strong>使用 <code dir="auto">&#x26;str</code>：</strong></li>
</ol>
<p>如果我们只需要引用或读取字符串而不需要修改它，并且希望避免额外的内存分配，我们可以使用 <code dir="auto">&#x26;str</code>。在金融应用程序中，<code dir="auto">&#x26;str</code> 可以用于传递字符串参数，访问股票代码等。</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">fn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">main</span><span style="--0:#D6DEEB;--1:#403F53">() {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">stock_symbol</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">AAPL</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">;</span><span style="--0:#809191;--1:#5E6578"> // 字符串切片，不可变</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">stock_name</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">get_stock_name</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C5E478;--1:#3C63B3">stock_symbol</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">Stock Name: {}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">stock_name</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">fn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">get_stock_name</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C5E478;--1:#3C63B3">symbol</span><span style="--0:#7FDBCA;--1:#097174">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">&#x26;</span><span style="--0:#D6DEEB;--1:#403F53">str) </span><span style="--0:#7FDBCA;--1:#097174">-></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">&#x26;</span><span style="--0:#D6DEEB;--1:#403F53">str {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">match</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">symbol</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">AAPL</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">=></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">Apple Inc.</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">GOOGL</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">=></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">Alphabet Inc.</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#C5E478;--1:#3C63B3">_</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">=></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">Unknown</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    }</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="fn main() {    let stock_symbol = &#x22;AAPL&#x22;; // 字符串切片，不可变    let stock_name = get_stock_name(stock_symbol);    println!(&#x22;Stock Name: {}&#x22;, stock_name);}fn get_stock_name(symbol: &#x26;str) -> &#x26;str {    match symbol {        &#x22;AAPL&#x22; => &#x22;Apple Inc.&#x22;,        &#x22;GOOGL&#x22; => &#x22;Alphabet Inc.&#x22;,        _ => &#x22;Unknown&#x22;,    }}"><div></div></button></div></figure></div>
<p>在这个示例中，我们定义了一个函数 <code dir="auto">get_stock_name</code>，它接受一个 <code dir="auto">&#x26;str</code> 参数来查找股票名称。这允许我们在不进行额外内存分配的情况下访问字符串。</p>
<ol start="3">
<li><strong>小结</strong></li>
</ol>
<p><code dir="auto">String</code> 和 <code dir="auto">&#x26;str</code> 在金融应用程序中的使用取决于我们的需求。如果需要修改字符串内容或者在运行时构建字符串，<code dir="auto">String</code> 是一个更好的选择。如果只需要访问字符串而不需要修改它，或者希望避免额外的内存分配，<code dir="auto">&#x26;str</code> 是更合适的选择。</p>
<h2 id="32-元组-tuple">3.2 元组 (Tuple)</h2>
<p>元组(Tuple)是Rust中的一种数据结构，它可以存储多个不同或相同类型的值，并且一旦创建，它们的长度就是不可变的。元组通常用于将多个值组合在一起以进行传递或返回，它们在量化金融中也有各种应用场景。</p>
<p>以下是一个元组的使用案例:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">fn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">main</span><span style="--0:#D6DEEB;--1:#403F53">() {</span></div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 创建一个元组，表示股票的价格和数量</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">stock</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">AAPL</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">150.50</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">1000</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 访问元组中的元素, 赋值给一并放在左边的变量们,</span></div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 这种赋值方式称为元组解构(Tuple Destructuring)</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#C5E478;--1:#3C63B3">symbol</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">price</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">quantity</span><span style="--0:#D6DEEB;--1:#403F53">) </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">stock</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 打印变量的值</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">股票代码: {}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">symbol</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">股票价格: ${:.2}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">price</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">股票数量: {}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">quantity</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 计算总价值</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">total_value</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">price</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">*</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#C5E478;--1:#3C63B3">quantity</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">as</span><span style="--0:#D6DEEB;--1:#403F53"> f64);</span><span style="--0:#809191;--1:#5E6578"> // 注意将数量转换为浮点数以进行计算</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">总价值: ${:.2}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">total_value</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="fn main() {    // 创建一个元组，表示股票的价格和数量    let stock = (&#x22;AAPL&#x22;, 150.50, 1000);    // 访问元组中的元素, 赋值给一并放在左边的变量们,    // 这种赋值方式称为元组解构(Tuple Destructuring)    let (symbol, price, quantity) = stock;    // 打印变量的值    println!(&#x22;股票代码: {}&#x22;, symbol);    println!(&#x22;股票价格: ${:.2}&#x22;, price);    println!(&#x22;股票数量: {}&#x22;, quantity);    // 计算总价值    let total_value = price * (quantity as f64); // 注意将数量转换为浮点数以进行计算    println!(&#x22;总价值: ${:.2}&#x22;, total_value);}"><div></div></button></div></figure></div>
<p><strong>执行结果:</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">股票代码: AAPL</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">股票价格: $150.50</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">股票数量: 1000</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">总价值: $150500.00</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="股票代码: AAPL股票价格: $150.50股票数量: 1000总价值: $150500.00"><div></div></button></div></figure></div>
<p>在上述Rust代码示例中，我们演示了如何使用元组来表示和存储股票的相关信息。让我们详细解释代码中的各个部分：</p>
<ol>
<li>
<p><strong>创建元组：</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">stock</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">AAPL</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">150.50</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">1000</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="let stock = (&#x22;AAPL&#x22;, 150.50, 1000);"><div></div></button></div></figure></div>
<p>这一行代码创建了一个元组 <code dir="auto">stock</code>，其中包含了三个元素：股票代码(字符串)、股票价格(浮点数)和股票数量(整数)。注意，元组的长度在创建后是不可变的，所以我们无法添加或删除元素。</p>
</li>
<li>
<p><strong>元组解构(Tuple Destructuring)：</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#C5E478;--1:#3C63B3">symbol</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">price</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">quantity</span><span style="--0:#D6DEEB;--1:#403F53">) </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">stock</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="let (symbol, price, quantity) = stock;"><div></div></button></div></figure></div>
<p>在这一行中，我们使用模式匹配的方式从元组中解构出各个元素，并将它们分别赋值给 <code dir="auto">symbol</code>、<code dir="auto">price</code> 和 <code dir="auto">quantity</code> 变量。这使得我们能够方便地访问元组的各个部分。</p>
</li>
<li>
<p><strong>打印变量的值：</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">股票代码: {}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">symbol</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">股票价格: ${:.2}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">price</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">股票数量: {}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">quantity</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="println!(&#x22;股票代码: {}&#x22;, symbol);println!(&#x22;股票价格: ${:.2}&#x22;, price);println!(&#x22;股票数量: {}&#x22;, quantity);"><div></div></button></div></figure></div>
<p>这些代码行使用 <code dir="auto">println!</code> 宏打印了元组中的不同变量的值。在第二个 <code dir="auto">println!</code> 中，我们使用 <code dir="auto">:.2</code> 来控制浮点数输出的小数点位数。</p>
</li>
<li>
<p><strong>计算总价值：</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">total_value</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">price</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">*</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#C5E478;--1:#3C63B3">quantity</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">as</span><span style="--0:#D6DEEB;--1:#403F53"> f64);</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="let total_value = price * (quantity as f64);"><div></div></button></div></figure></div>
<p>这一行代码计算了股票的总价值。由于 <code dir="auto">quantity</code> 是整数，我们需要将其转换为浮点数 (<code dir="auto">f64</code>) 来进行计算，以避免整数除法的问题。</p>
</li>
</ol>
<p>最后，我们打印出了计算得到的总价值，得到了完整的股票信息。</p>
<p>总之，元组是一种方便的数据结构，可用于组合不同类型的值，并且能够进行模式匹配以轻松访问其中的元素。在量化金融或其他领域中，元组可用于组织和传递多个相关的数据项。</p>
<h2 id="33-数组">3.3 数组</h2>
<p>在Rust中，数组是一种固定大小的数据结构，它存储相同类型的元素，并且一旦声明了大小，就不能再改变。Rust中的数组有以下特点：</p>
<ol>
<li><strong>固定大小</strong>：：数组和元组都是静态大小的数据结构。数组的大小在声明时必须明确指定，而且不能在运行时改变。这意味着一旦数组创建，它的长度就是不可变的。</li>
<li><strong>相同类型</strong>：和元组不同，数组中的所有元素必须具有相同的数据类型。这意味着一个数组中的元素类型必须是一致的，例如，所有的整数或所有的浮点数。</li>
<li><strong>栈上分配</strong>：Rust的数组是在栈上分配内存的，这使得它们在访问和迭代时非常高效。但是，由于它们是栈上的，所以大小必须在编译时确定。</li>
</ol>
<p>下面是一个示例，演示了如何声明、初始化和访问Rust数组：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">fn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">main</span><span style="--0:#D6DEEB;--1:#403F53">() {</span></div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 声明一个包含5个整数的数组，使用[类型; 大小]语法</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">numbers</span><span style="--0:#7FDBCA;--1:#097174">:</span><span style="--0:#D6DEEB;--1:#403F53"> [i32; </span><span style="--0:#F78C6C;--1:#AA0982">5</span><span style="--0:#D6DEEB;--1:#403F53">] </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> [</span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">3</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">4</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">5</span><span style="--0:#D6DEEB;--1:#403F53">];</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 访问数组元素，索引从0开始</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">第一个元素: {}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">numbers</span><span style="--0:#D6DEEB;--1:#403F53">[</span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">]);</span><span style="--0:#809191;--1:#5E6578"> // 输出 "第一个元素: 1"</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">第三个元素: {}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">numbers</span><span style="--0:#D6DEEB;--1:#403F53">[</span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#D6DEEB;--1:#403F53">]);</span><span style="--0:#809191;--1:#5E6578"> // 输出 "第三个元素: 3"</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 数组长度必须在编译时确定，但可以使用.len()方法获取长度</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">length</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">numbers</span><span style="--0:#7FDBCA;--1:#097174">.</span><span style="--0:#82AAFF;--1:#3C63B3">len</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">数组长度: {}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">length</span><span style="--0:#D6DEEB;--1:#403F53">);</span><span style="--0:#809191;--1:#5E6578"> // 输出 "数组长度: 5"</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="fn main() {    // 声明一个包含5个整数的数组，使用[类型; 大小]语法    let numbers: [i32; 5] = [1, 2, 3, 4, 5];    // 访问数组元素，索引从0开始    println!(&#x22;第一个元素: {}&#x22;, numbers[0]); // 输出 &#x22;第一个元素: 1&#x22;    println!(&#x22;第三个元素: {}&#x22;, numbers[2]); // 输出 &#x22;第三个元素: 3&#x22;    // 数组长度必须在编译时确定，但可以使用.len()方法获取长度    let length = numbers.len();    println!(&#x22;数组长度: {}&#x22;, length); // 输出 &#x22;数组长度: 5&#x22;}"><div></div></button></div></figure></div>
<p><strong>执行结果：</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">第一个元素: 1</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">第三个元素: 3</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">数组长度: 5</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="第一个元素: 1第三个元素: 3数组长度: 5"><div></div></button></div></figure></div>
<h3 id="案例1简单移动平均线计算器-sma-calculator">案例1：简单移动平均线计算器 (SMA Calculator)</h3>
<p>简单移动平均线(Simple Moving Average，SMA)是一种常用的技术分析指标，用于平滑时间序列数据以识别趋势。SMA的计算公式非常简单，它是过去一段时间内数据点的平均值。以下是SMA的计算公式：</p>
<p>$$
SMA = (X1 + X2 + X3 + … + Xn) / n
$$</p>
<p>当在Rust中进行量化金融建模时，我们通常会使用数组(Array)和其他数据结构来管理和处理金融数据。以下是一个简单的Rust量化金融案例，展示如何使用数组来计算股票的简单移动平均线(Simple Moving Average，SMA)。</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">fn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">main</span><span style="--0:#D6DEEB;--1:#403F53">() {</span></div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 假设这是一个包含股票价格的数组</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">stock_prices</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> [</span><span style="--0:#F78C6C;--1:#AA0982">50.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">52.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">55.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">60.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">58.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">62.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">65.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">70.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">75.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">80.0</span><span style="--0:#D6DEEB;--1:#403F53">];</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 计算简单移动平均线(SMA)</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">window_size</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">5</span><span style="--0:#D6DEEB;--1:#403F53">;</span><span style="--0:#809191;--1:#5E6578"> // 移动平均窗口大小</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">mut</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">sma_values</span><span style="--0:#7FDBCA;--1:#097174">:</span><span style="--0:#D6DEEB;--1:#403F53"> Vec&#x3C;f64> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> Vec</span><span style="--0:#7FDBCA;--1:#097174">::</span><span style="--0:#82AAFF;--1:#3C63B3">new</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">i</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">in</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#7FDBCA;--1:#097174">..</span><span style="--0:#C5E478;--1:#3C63B3">stock_prices</span><span style="--0:#7FDBCA;--1:#097174">.</span><span style="--0:#82AAFF;--1:#3C63B3">len</span><span style="--0:#D6DEEB;--1:#403F53">() </span><span style="--0:#7FDBCA;--1:#097174">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">window_size</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">+</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">window</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">&#x26;</span><span style="--0:#C5E478;--1:#3C63B3">stock_prices</span><span style="--0:#D6DEEB;--1:#403F53">[</span><span style="--0:#C5E478;--1:#3C63B3">i</span><span style="--0:#7FDBCA;--1:#097174">..</span><span style="--0:#C5E478;--1:#3C63B3">i</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">+</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">window_size</span><span style="--0:#D6DEEB;--1:#403F53">];</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">sum</span><span style="--0:#7FDBCA;--1:#097174">:</span><span style="--0:#D6DEEB;--1:#403F53"> f64 </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">window</span><span style="--0:#7FDBCA;--1:#097174">.</span><span style="--0:#82AAFF;--1:#3C63B3">iter</span><span style="--0:#D6DEEB;--1:#403F53">()</span><span style="--0:#7FDBCA;--1:#097174">.</span><span style="--0:#82AAFF;--1:#3C63B3">sum</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">sma</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">sum</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">/</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">window_size</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">as</span><span style="--0:#D6DEEB;--1:#403F53"> f64;</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#C5E478;--1:#3C63B3">sma_values</span><span style="--0:#7FDBCA;--1:#097174">.</span><span style="--0:#82AAFF;--1:#3C63B3">push</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C5E478;--1:#3C63B3">sma</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    }</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 打印SMA值</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">简单移动平均线(SMA):</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">for</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#C5E478;--1:#3C63B3">i</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">sma</span><span style="--0:#D6DEEB;--1:#403F53">) </span><span style="--0:#C792EA;--1:#8D46B4">in</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">sma_values</span><span style="--0:#7FDBCA;--1:#097174">.</span><span style="--0:#82AAFF;--1:#3C63B3">iter</span><span style="--0:#D6DEEB;--1:#403F53">()</span><span style="--0:#7FDBCA;--1:#097174">.</span><span style="--0:#82AAFF;--1:#3C63B3">enumerate</span><span style="--0:#D6DEEB;--1:#403F53">() {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">Day {}: {:.2}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">i</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">+</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">window_size</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">sma</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    }</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="fn main() {    // 假设这是一个包含股票价格的数组    let stock_prices = [50.0, 52.0, 55.0, 60.0, 58.0, 62.0, 65.0, 70.0, 75.0, 80.0];    // 计算简单移动平均线(SMA)    let window_size = 5; // 移动平均窗口大小    let mut sma_values: Vec<f64> = Vec::new();    for i in 0..stock_prices.len() - window_size + 1 {        let window = &#x26;stock_prices[i..i + window_size];        let sum: f64 = window.iter().sum();        let sma = sum / window_size as f64;        sma_values.push(sma);    }    // 打印SMA值    println!(&#x22;简单移动平均线(SMA):&#x22;);    for (i, sma) in sma_values.iter().enumerate() {        println!(&#x22;Day {}: {:.2}&#x22;, i + window_size, sma);    }}"><div></div></button></div></figure></div>
<p><strong>执行结果:</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">简单移动平均线(SMA):</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">Day 5: 55.00</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">Day 6: 57.40</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">Day 7: 60.00</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">Day 8: 63.00</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">Day 9: 66.00</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">Day 10: 70.40</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="简单移动平均线(SMA):Day 5: 55.00Day 6: 57.40Day 7: 60.00Day 8: 63.00Day 9: 66.00Day 10: 70.40"><div></div></button></div></figure></div>
<p>在这个示例中，我们计算的是简单移动平均线(SMA)，窗口大小为5天。因此，SMA值是从第5天开始的，直到最后一天。在输出中，“Day 5” 对应着第5天的SMA值，“Day 6” 对应第6天的SMA值，以此类推。这是因为SMA需要一定数量的历史数据才能计算出第一个移动平均值，所以前几天的结果会是空的或不可用的。</p>
<h3 id="补充学习-范围设置">补充学习: 范围设置</h3>
<p><code dir="auto">for i in 0..stock_prices.len() - window_size + 1</code> 这样写是为了创建一个迭代器，该迭代器将在股票价格数组上滑动一个大小为 <code dir="auto">window_size</code> 的窗口，以便计算简单移动平均线(SMA)。</p>
<p>让我们解释一下这个表达式的各个部分：</p>
<ul>
<li><code dir="auto">0..stock_prices.len()</code>：这部分创建了一个范围(range)，从0到 <code dir="auto">stock_prices</code> 数组的长度。范围的右边界是不包含的，所以它包含了从0到 <code dir="auto">stock_prices.len() - 1</code> 的所有索引。</li>
<li><code dir="auto">- window_size + 1</code>：这部分将范围的右边界减去 <code dir="auto">window_size</code>，然后再加1。这是为了确保窗口在数组上滑动，以便计算SMA。考虑到窗口的大小，我们需要确保它在数组内完全滑动，因此右边界需要向左移动 <code dir="auto">window_size - 1</code> 个位置。</li>
</ul>
<p>因此，整个表达式 <code dir="auto">0..stock_prices.len() - window_size + 1</code> 创建了一个范围，该范围从0到 <code dir="auto">stock_prices.len() - window_size</code>，覆盖了数组中所有可能的窗口的起始索引。在每次迭代中，这个范围将产生一个新的索引，用于创建一个新的窗口，以计算SMA。这是一种有效的方法来遍历数组并执行滑动窗口操作。</p>
<h3 id="案例2-指数移动平均线计算器-ema-calculator">案例2： 指数移动平均线计算器 (EMA Calculator)</h3>
<p>指数移动平均线(Exponential Moving Average，EMA)是另一种常用的技术分析指标，与SMA不同，EMA赋予了更多的权重最近的价格数据，因此它更加敏感于价格的近期变化。EMA的计算公式如下：</p>
<p>$$
EMA(t) = (P(t) * α) + (EMA(y) * (1 - α))
$$</p>
<p>其中：</p>
<ul>
<li><code dir="auto">EMA(t)</code>：当前时刻的EMA值。</li>
<li><code dir="auto">P(t)</code>：当前时刻的价格。</li>
<li><code dir="auto">EMA(y)</code>：前一时刻的EMA值。</li>
<li><code dir="auto">α</code>：平滑因子，通常通过指定一个时间窗口长度来计算，<code dir="auto">α = 2 / (n + 1)</code>，其中 <code dir="auto">n</code> 是时间窗口长度。</li>
</ul>
<p>在技术分析中，EMA(指数移动平均线)和SMA(简单移动平均线)的计算有不同的起始点。</p>
<ul>
<li>EMA的计算通常可以从第一个数据点(Day 1)开始，因为它使用了指数加权平均的方法，使得前面的数据点的权重较小，从而考虑了所有的历史数据。</li>
<li>而SMA的计算需要使用一个固定大小的窗口，因此必须从窗口大小之后的数据点(在我们的例子中是从第五天开始)才能得到第一个SMA值。这是因为SMA是对一段时间内的数据进行简单平均，需要足够的数据点来计算平均值。</li>
</ul>
<p>现在让我们在Rust中编写一个EMA计算器，类似于之前的SMA计算器：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">fn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">main</span><span style="--0:#D6DEEB;--1:#403F53">() {</span></div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 假设这是一个包含股票价格的数组</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">stock_prices</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> [</span><span style="--0:#F78C6C;--1:#AA0982">50.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">52.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">55.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">60.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">58.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">62.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">65.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">70.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">75.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">80.0</span><span style="--0:#D6DEEB;--1:#403F53">];</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 计算指数移动平均线(EMA)</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">window_size</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">5</span><span style="--0:#D6DEEB;--1:#403F53">;</span><span style="--0:#809191;--1:#5E6578"> // 时间窗口大小</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">mut</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">ema_values</span><span style="--0:#7FDBCA;--1:#097174">:</span><span style="--0:#D6DEEB;--1:#403F53"> Vec&#x3C;f64> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> Vec</span><span style="--0:#7FDBCA;--1:#097174">::</span><span style="--0:#82AAFF;--1:#3C63B3">new</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">alpha</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">2.0</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">/</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#C5E478;--1:#3C63B3">window_size</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">as</span><span style="--0:#D6DEEB;--1:#403F53"> f64 </span><span style="--0:#7FDBCA;--1:#097174">+</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">1.0</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">mut</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">ema</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">stock_prices</span><span style="--0:#D6DEEB;--1:#403F53">[</span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">];</span><span style="--0:#809191;--1:#5E6578"> // 初始EMA值等于第一个价格</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">price</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">in</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">&#x26;</span><span style="--0:#C5E478;--1:#3C63B3">stock_prices</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#C5E478;--1:#3C63B3">ema</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#C5E478;--1:#3C63B3">price</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">ema</span><span style="--0:#D6DEEB;--1:#403F53">) </span><span style="--0:#7FDBCA;--1:#097174">*</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">alpha</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">+</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">ema</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#C5E478;--1:#3C63B3">ema_values</span><span style="--0:#7FDBCA;--1:#097174">.</span><span style="--0:#82AAFF;--1:#3C63B3">push</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C5E478;--1:#3C63B3">ema</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    }</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 打印EMA值</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">指数移动平均线(EMA):</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">for</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#C5E478;--1:#3C63B3">i</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">ema</span><span style="--0:#D6DEEB;--1:#403F53">) </span><span style="--0:#C792EA;--1:#8D46B4">in</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">ema_values</span><span style="--0:#7FDBCA;--1:#097174">.</span><span style="--0:#82AAFF;--1:#3C63B3">iter</span><span style="--0:#D6DEEB;--1:#403F53">()</span><span style="--0:#7FDBCA;--1:#097174">.</span><span style="--0:#82AAFF;--1:#3C63B3">enumerate</span><span style="--0:#D6DEEB;--1:#403F53">() {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">Day {}: {:.2}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">i</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">+</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">ema</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    }</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="fn main() {    // 假设这是一个包含股票价格的数组    let stock_prices = [50.0, 52.0, 55.0, 60.0, 58.0, 62.0, 65.0, 70.0, 75.0, 80.0];    // 计算指数移动平均线(EMA)    let window_size = 5; // 时间窗口大小    let mut ema_values: Vec<f64> = Vec::new();    let alpha = 2.0 / (window_size as f64 + 1.0);    let mut ema = stock_prices[0]; // 初始EMA值等于第一个价格    for price in &#x26;stock_prices {        ema = (price - ema) * alpha + ema;        ema_values.push(ema);    }    // 打印EMA值    println!(&#x22;指数移动平均线(EMA):&#x22;);    for (i, ema) in ema_values.iter().enumerate() {        println!(&#x22;Day {}: {:.2}&#x22;, i + 1, ema);    }}"><div></div></button></div></figure></div>
<p><strong>执行结果:</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">指数移动平均线(EMA):</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">Day 1: 50.00</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">Day 2: 51.00</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">Day 3: 52.75</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">Day 4: 55.88</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">Day 5: 56.59</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">Day 6: 58.39</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">Day 7: 59.92</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">Day 8: 62.02</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">Day 9: 63.95</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">Day 10: 66.30</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="指数移动平均线(EMA):Day 1: 50.00Day 2: 51.00Day 3: 52.75Day 4: 55.88Day 5: 56.59Day 6: 58.39Day 7: 59.92Day 8: 62.02Day 9: 63.95Day 10: 66.30"><div></div></button></div></figure></div>
<h3 id="补充学习-平滑因子alpha">补充学习: 平滑因子alpha</h3>
<p>当计算指数移动平均线(EMA)时，需要使用一个平滑因子 <code dir="auto">alpha</code>，这个因子决定了最近价格数据和前一EMA值的权重分配，它的计算方法是 <code dir="auto">alpha = 2.0 / (window_size as f64 + 1.0)</code>。让我详细解释这句代码的含义：</p>
<ol>
<li>
<p><code dir="auto">window_size</code> 表示时间窗口大小，通常用来确定计算EMA时要考虑多少个数据点。较大的 <code dir="auto">window_size</code> 会导致EMA更加平滑，对价格波动的反应更慢，而较小的 <code dir="auto">window_size</code> 则使EMA更加敏感，更快地反应价格变化。</p>
</li>
<li>
<p><code dir="auto">window_size as f64</code> 将 <code dir="auto">window_size</code> 转换为浮点数类型 (<code dir="auto">f64</code>)，因为我们需要在计算中使用浮点数来确保精度。</p>
</li>
<li>
<p><code dir="auto">window_size as f64 + 1.0</code> 将窗口大小加1，这是EMA计算中的一部分，用于调整平滑因子。添加1是因为通常我们从第一个数据点开始计算EMA，所以需要考虑一个额外的数据点。</p>
</li>
<li>
<p>最终，<code dir="auto">2.0 / (window_size as f64 + 1.0)</code> 计算出平滑因子 <code dir="auto">alpha</code>。这个平滑因子决定了EMA对最新数据的权重，通常情况下，<code dir="auto">alpha</code> 的值会接近于1，以便更多地考虑最新的价格数据。较小的 <code dir="auto">alpha</code> 值会使EMA对历史数据更加平滑，而较大的 <code dir="auto">alpha</code> 值会更强调最新的价格变动。</p>
</li>
</ol>
<p>总之，这一行代码计算了用于指数移动平均线计算的平滑因子 <code dir="auto">alpha</code>，该因子在EMA计算中决定了最新数据和历史数据的权重分配，以便在分析中更好地反映价格趋势。</p>
<h3 id="案例3-相对强度指数relative-strength-indexrsi">案例3 相对强度指数(Relative Strength Index，RSI)</h3>
<p>RSI是一种用于衡量价格趋势的技术指标，通常用于股票和其他金融市场的技术分析。相对强弱指数(RSI)的计算公式如下：</p>
<p>RSI = 100 - [100 / (1 + RS)]</p>
<p>其中，RS表示14天内收市价上涨数之和的平均值除以14天内收市价下跌数之和的平均值。</p>
<p>让我们通过一个示例来说明：</p>
<p>假设最近14天的涨跌情况如下：</p>
<ul>
<li>第一天上涨2元</li>
<li>第二天下跌2元</li>
<li>第三至第五天每天上涨3元</li>
<li>第六天下跌4元</li>
<li>第七天上涨2元</li>
<li>第八天下跌5元</li>
<li>第九天下跌6元</li>
<li>第十至十二天每天上涨1元</li>
<li>第十三至十四天每天下跌3元</li>
</ul>
<p>现在，我们来计算RSI的步骤：</p>
<ol>
<li>首先，将14天内上涨的总额相加，然后除以14。在这个示例中，总共上涨16元，所以计算结果是16 / 14 = 1.14285714286</li>
<li>接下来，将14天内下跌的总额相加，然后除以14。在这个示例中，总共下跌23元，所以计算结果是23 / 14 = 1.64285714286</li>
<li>然后，计算相对强度RS，即RS = 1.14285714286 / 1.64285714286 = 0.69565217391</li>
<li>接着，计算1 + RS，即1 + 0.69565217391 = 1.69565217391。</li>
<li>最后，将100除以1 + RS，即100 / 1.69565217391 = 58.9743589745</li>
<li>最终的RSI值为100 - 58.9743589745 = 41.0256410255 ≈ 41.026</li>
</ol>
<p>这样，我们就得到了相对强弱指数(RSI)的值，它可以帮助分析市场的超买和超卖情况。以下是一个计算RSI的示例代码：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">fn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">calculate_rsi</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C5E478;--1:#3C63B3">up_days</span><span style="--0:#7FDBCA;--1:#097174">:</span><span style="--0:#D6DEEB;--1:#403F53"> Vec&#x3C;f64>, </span><span style="--0:#C5E478;--1:#3C63B3">down_days</span><span style="--0:#7FDBCA;--1:#097174">:</span><span style="--0:#D6DEEB;--1:#403F53"> Vec&#x3C;f64>) </span><span style="--0:#7FDBCA;--1:#097174">-></span><span style="--0:#D6DEEB;--1:#403F53"> f64 {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">up_sum</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">up_days</span><span style="--0:#7FDBCA;--1:#097174">.</span><span style="--0:#82AAFF;--1:#3C63B3">iter</span><span style="--0:#D6DEEB;--1:#403F53">()</span><span style="--0:#7FDBCA;--1:#097174">.</span><span style="--0:#82AAFF;--1:#3C63B3">sum</span><span style="--0:#7FDBCA;--1:#097174">::</span><span style="--0:#D6DEEB;--1:#403F53">&#x3C;f64>();</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">down_sum</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">down_days</span><span style="--0:#7FDBCA;--1:#097174">.</span><span style="--0:#82AAFF;--1:#3C63B3">iter</span><span style="--0:#D6DEEB;--1:#403F53">()</span><span style="--0:#7FDBCA;--1:#097174">.</span><span style="--0:#82AAFF;--1:#3C63B3">sum</span><span style="--0:#7FDBCA;--1:#097174">::</span><span style="--0:#D6DEEB;--1:#403F53">&#x3C;f64>();</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">rs</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">up_sum</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">/</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">down_sum</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">rsi</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">100.0</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">-</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#F78C6C;--1:#AA0982">100.0</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">/</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#F78C6C;--1:#AA0982">1.0</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">+</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">rs</span><span style="--0:#D6DEEB;--1:#403F53">));</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C5E478;--1:#3C63B3">rsi</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">fn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">main</span><span style="--0:#D6DEEB;--1:#403F53">() {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">up_days</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">vec!</span><span style="--0:#D6DEEB;--1:#403F53">[</span><span style="--0:#F78C6C;--1:#AA0982">2.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">3.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">3.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">3.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">2.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">1.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">1.0</span><span style="--0:#D6DEEB;--1:#403F53">];</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">down_days</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">vec!</span><span style="--0:#D6DEEB;--1:#403F53">[</span><span style="--0:#F78C6C;--1:#AA0982">2.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">4.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">5.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">6.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">4.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">3.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">3.0</span><span style="--0:#D6DEEB;--1:#403F53">];</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">rsi</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">calculate_rsi</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C5E478;--1:#3C63B3">up_days</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">down_days</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">RSI: {}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">rsi</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="fn calculate_rsi(up_days: Vec<f64>, down_days: Vec<f64>) -> f64 {    let up_sum = up_days.iter().sum::<f64>();    let down_sum = down_days.iter().sum::<f64>();    let rs = up_sum / down_sum;    let rsi = 100.0 - (100.0 / (1.0 + rs));    rsi}fn main() {    let up_days = vec![2.0, 3.0, 3.0, 3.0, 2.0, 1.0, 1.0];    let down_days = vec![2.0, 4.0, 5.0, 6.0, 4.0, 3.0, 3.0];    let rsi = calculate_rsi(up_days, down_days);    println!(&#x22;RSI: {}&#x22;, rsi);}"><div></div></button></div></figure></div>
<p><strong>执行结果:</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">RSI: 41.026</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="RSI: 41.026"><div></div></button></div></figure></div>
<h2 id="34-切片">3.4 切片</h2>
<p>在Rust中，切片(Slice)是一种引用数组或向量中一部分连续元素的方法，而不需要复制数据。切片有时非常有用，特别是在量化金融中，因为我们经常需要处理时间序列数据或其他大型数据集。</p>
<p>下面我将提供一个简单的案例，展示如何在Rust中使用切片进行量化金融分析。</p>
<p>假设有一个包含股票价格的数组，我们想计算某段时间内的最高和最低价格。以下是一个示例：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">fn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">main</span><span style="--0:#D6DEEB;--1:#403F53">() {</span></div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 假设这是一个包含股票价格的数组</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">stock_prices</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> [</span><span style="--0:#F78C6C;--1:#AA0982">50.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">52.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">55.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">60.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">58.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">62.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">65.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">70.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">75.0</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">80.0</span><span style="--0:#D6DEEB;--1:#403F53">];</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 定义时间窗口范围</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">start_index</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#D6DEEB;--1:#403F53">;</span><span style="--0:#809191;--1:#5E6578"> // 开始日期的索引(从0开始)</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">end_index</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">6</span><span style="--0:#D6DEEB;--1:#403F53">;</span><span style="--0:#809191;--1:#5E6578">   // 结束日期的索引(包含)</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 使用切片获取时间窗口内的价格数据</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">price_window</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">&#x26;</span><span style="--0:#C5E478;--1:#3C63B3">stock_prices</span><span style="--0:#D6DEEB;--1:#403F53">[</span><span style="--0:#C5E478;--1:#3C63B3">start_index</span><span style="--0:#7FDBCA;--1:#097174">..=</span><span style="--0:#C5E478;--1:#3C63B3">end_index</span><span style="--0:#D6DEEB;--1:#403F53">];</span><span style="--0:#809191;--1:#5E6578"> // 注意使用..=来包含结束索引</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 计算最高和最低价格</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">max_price</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">price_window</span><span style="--0:#7FDBCA;--1:#097174">.</span><span style="--0:#82AAFF;--1:#3C63B3">iter</span><span style="--0:#D6DEEB;--1:#403F53">()</span><span style="--0:#7FDBCA;--1:#097174">.</span><span style="--0:#82AAFF;--1:#3C63B3">cloned</span><span style="--0:#D6DEEB;--1:#403F53">()</span><span style="--0:#7FDBCA;--1:#097174">.</span><span style="--0:#82AAFF;--1:#3C63B3">fold</span><span style="--0:#D6DEEB;--1:#403F53">(f64</span><span style="--0:#7FDBCA;--1:#097174">::</span><span style="--0:#82AAFF;--1:#3C63B3">NEG_INFINITY</span><span style="--0:#D6DEEB;--1:#403F53">, f64</span><span style="--0:#7FDBCA;--1:#097174">::</span><span style="--0:#C5E478;--1:#3C63B3">max</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">min_price</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">price_window</span><span style="--0:#7FDBCA;--1:#097174">.</span><span style="--0:#82AAFF;--1:#3C63B3">iter</span><span style="--0:#D6DEEB;--1:#403F53">()</span><span style="--0:#7FDBCA;--1:#097174">.</span><span style="--0:#82AAFF;--1:#3C63B3">cloned</span><span style="--0:#D6DEEB;--1:#403F53">()</span><span style="--0:#7FDBCA;--1:#097174">.</span><span style="--0:#82AAFF;--1:#3C63B3">fold</span><span style="--0:#D6DEEB;--1:#403F53">(f64</span><span style="--0:#7FDBCA;--1:#097174">::</span><span style="--0:#82AAFF;--1:#3C63B3">INFINITY</span><span style="--0:#D6DEEB;--1:#403F53">, f64</span><span style="--0:#7FDBCA;--1:#097174">::</span><span style="--0:#C5E478;--1:#3C63B3">min</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">    // 打印结果</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">时间窗口内的最高价格: {:.2}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">max_price</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3C63B3">println!</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">时间窗口内的最低价格: {:.2}</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">min_price</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="fn main() {    // 假设这是一个包含股票价格的数组    let stock_prices = [50.0, 52.0, 55.0, 60.0, 58.0, 62.0, 65.0, 70.0, 75.0, 80.0];    // 定义时间窗口范围    let start_index = 2; // 开始日期的索引(从0开始)    let end_index = 6;   // 结束日期的索引(包含)    // 使用切片获取时间窗口内的价格数据    let price_window = &#x26;stock_prices[start_index..=end_index]; // 注意使用..=来包含结束索引    // 计算最高和最低价格    let max_price = price_window.iter().cloned().fold(f64::NEG_INFINITY, f64::max);    let min_price = price_window.iter().cloned().fold(f64::INFINITY, f64::min);    // 打印结果    println!(&#x22;时间窗口内的最高价格: {:.2}&#x22;, max_price);    println!(&#x22;时间窗口内的最低价格: {:.2}&#x22;, min_price);}"><div></div></button></div></figure></div>
<p><strong>执行结果:</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">时间窗口内的最高价格: 65.00</span></div><div class="ec-line"><span style="--0:#d6deeb;--1:#403f53">时间窗口内的最低价格: 55.00</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="时间窗口内的最高价格: 65.00时间窗口内的最低价格: 55.00"><div></div></button></div></figure></div>
<p>下面我会详细解释以下两行代码：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">max_price</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">price_window</span><span style="--0:#7FDBCA;--1:#097174">.</span><span style="--0:#82AAFF;--1:#3C63B3">iter</span><span style="--0:#D6DEEB;--1:#403F53">()</span><span style="--0:#7FDBCA;--1:#097174">.</span><span style="--0:#82AAFF;--1:#3C63B3">cloned</span><span style="--0:#D6DEEB;--1:#403F53">()</span><span style="--0:#7FDBCA;--1:#097174">.</span><span style="--0:#82AAFF;--1:#3C63B3">fold</span><span style="--0:#D6DEEB;--1:#403F53">(f64</span><span style="--0:#7FDBCA;--1:#097174">::</span><span style="--0:#82AAFF;--1:#3C63B3">NEG_INFINITY</span><span style="--0:#D6DEEB;--1:#403F53">, f64</span><span style="--0:#7FDBCA;--1:#097174">::</span><span style="--0:#C5E478;--1:#3C63B3">max</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">min_price</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">price_window</span><span style="--0:#7FDBCA;--1:#097174">.</span><span style="--0:#82AAFF;--1:#3C63B3">iter</span><span style="--0:#D6DEEB;--1:#403F53">()</span><span style="--0:#7FDBCA;--1:#097174">.</span><span style="--0:#82AAFF;--1:#3C63B3">cloned</span><span style="--0:#D6DEEB;--1:#403F53">()</span><span style="--0:#7FDBCA;--1:#097174">.</span><span style="--0:#82AAFF;--1:#3C63B3">fold</span><span style="--0:#D6DEEB;--1:#403F53">(f64</span><span style="--0:#7FDBCA;--1:#097174">::</span><span style="--0:#82AAFF;--1:#3C63B3">INFINITY</span><span style="--0:#D6DEEB;--1:#403F53">, f64</span><span style="--0:#7FDBCA;--1:#097174">::</span><span style="--0:#C5E478;--1:#3C63B3">min</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="let max_price = price_window.iter().cloned().fold(f64::NEG_INFINITY, f64::max);let min_price = price_window.iter().cloned().fold(f64::INFINITY, f64::min);"><div></div></button></div></figure></div>
<p>这两行代码的目标是计算时间窗口内的最高价格(<code dir="auto">max_price</code>)和最低价格(<code dir="auto">min_price</code>)。让我们一一解释它们的每一部分：</p>
<ol>
<li><code dir="auto">price_window.iter()</code>：<code dir="auto">price_window</code> 是一个切片，使用 <code dir="auto">.iter()</code> 方法可以获得一个迭代器，用于遍历切片中的元素。</li>
<li><code dir="auto">.cloned()</code>：<code dir="auto">cloned()</code> 方法用于将切片中的元素进行克隆，因为 <code dir="auto">fold</code> 函数需要元素的拷贝(<code dir="auto">Clone</code> trait)。这是因为 <code dir="auto">f64</code> 类型是不可变类型，无法通过引用进行直接比较。所以我们将元素克隆，以便在 <code dir="auto">fold</code> 函数中进行比较。</li>
<li><code dir="auto">.fold(f64::NEG_INFINITY, f64::max)</code>：<code dir="auto">fold</code> 函数是一个迭代器适配器，它将迭代器中的元素按照给定的操作进行折叠(归约)。在这里，我们使用 <code dir="auto">fold</code> 来找到最高价格。
<ul>
<li><code dir="auto">f64::NEG_INFINITY</code> 是一个负无穷大的初始值，用于确保任何实际的价格都会大于它。这是为了确保在计算最高价格时，如果时间窗口为空，结果将是负无穷大。</li>
<li><code dir="auto">f64::max</code> 是一个函数，用于计算两个 <code dir="auto">f64</code> 类型的数值中的较大值。在 <code dir="auto">fold</code> 过程中，它会比较当前最高价格和迭代器中的下一个元素，然后返回较大的那个。</li>
</ul>
</li>
</ol>
<h3 id="补充学习-fold函数">补充学习: fold函数</h3>
<p><code dir="auto">fold</code> 是一个常见的函数式编程概念，用于在集合(如数组、迭代器等)的元素上进行折叠(或归约)操作。它允许你在集合上进行迭代，并且在每次迭代中将一个累积值与集合中的元素进行某种操作，最终得到一个最终的累积结果。</p>
<p>在 Rust 中，<code dir="auto">fold</code> 函数的签名如下：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">fn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">fold</span><span style="--0:#D6DEEB;--1:#403F53">&#x3C;B, F>(</span><span style="--0:#7FDBCA;--1:#097174">self</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3C63B3">init</span><span style="--0:#7FDBCA;--1:#097174">:</span><span style="--0:#D6DEEB;--1:#403F53"> B, </span><span style="--0:#C5E478;--1:#3C63B3">f</span><span style="--0:#7FDBCA;--1:#097174">:</span><span style="--0:#D6DEEB;--1:#403F53"> F) </span><span style="--0:#7FDBCA;--1:#097174">-></span><span style="--0:#D6DEEB;--1:#403F53"> B</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="fn fold<B, F>(self, init: B, f: F) -> B"><div></div></button></div></figure></div>
<p>这个函数接受三个参数：</p>
<ul>
<li><code dir="auto">init</code>：初始值，表示折叠操作的起始值。</li>
<li><code dir="auto">f</code>：一个闭包(函数)，它定义了在每次迭代中如何将当前的累积值与集合中的元素进行操作。</li>
<li>返回值：最终的累积结果。</li>
</ul>
<p><code dir="auto">fold</code> 的工作方式如下：</p>
<ol>
<li>它从初始值 <code dir="auto">init</code> 开始。</li>
<li>对于集合中的每个元素，它调用闭包 <code dir="auto">f</code>，将当前累积值和元素作为参数传递给闭包。</li>
<li>闭包 <code dir="auto">f</code> 执行某种操作，生成一个新的累积值。</li>
<li>新的累积值成为下一次迭代的输入。</li>
<li>此过程重复，直到遍历完集合中的所有元素。</li>
<li>最终的累积值成为 <code dir="auto">fold</code> 函数的返回值。</li>
</ol>
<p>这个概念的好处在于，我们可以使用 <code dir="auto">fold</code> 函数来进行各种集合的累积操作，例如求和、求积、查找最大值、查找最小值等。在之前的示例中，我们使用了 <code dir="auto">fold</code> 函数来计算最高价格和最低价格，将当前的最高/最低价格与集合中的元素进行比较，并更新累积值，最终得到了最高和最低价格。</p> </div> <footer class="astro-w7wtsaw6"> <div class="meta sl-flex astro-w7wtsaw6">   </div> <div class="pagination-links astro-qnftudm7" dir="ltr"> <a href="/chapters/chapter_2/" rel="prev" class="astro-qnftudm7"> <svg aria-hidden="true" class="astro-qnftudm7 astro-xrndq6a6" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.5rem;"><path d="M17 11H9.41l3.3-3.29a1.004 1.004 0 1 0-1.42-1.42l-5 5a1 1 0 0 0-.21.33 1 1 0 0 0 0 .76 1 1 0 0 0 .21.33l5 5a1.002 1.002 0 0 0 1.639-.325 1 1 0 0 0-.219-1.095L9.41 13H17a1 1 0 0 0 0-2Z"/></svg>  <span class="astro-qnftudm7"> Previous <br class="astro-qnftudm7"> <span class="link-title astro-qnftudm7">2. 格式化输出</span> </span> </a> <a href="/chapters/chapter_4/" rel="next" class="astro-qnftudm7"> <svg aria-hidden="true" class="astro-qnftudm7 astro-xrndq6a6" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.5rem;"><path d="M17.92 11.62a1.001 1.001 0 0 0-.21-.33l-5-5a1.003 1.003 0 1 0-1.42 1.42l3.3 3.29H7a1 1 0 0 0 0 2h7.59l-3.3 3.29a1.002 1.002 0 0 0 .325 1.639 1 1 0 0 0 1.095-.219l5-5a1 1 0 0 0 .21-.33 1 1 0 0 0 0-.76Z"/></svg>  <span class="astro-qnftudm7"> Next <br class="astro-qnftudm7"> <span class="link-title astro-qnftudm7">4. 自定义类型 Struct &amp; Enum</span> </span> </a> </div>  </footer>  </div> </div>   </main> </div> </div>  </div> </div>  </body></html>